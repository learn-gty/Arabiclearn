// Dictionnaire des traductions (clé = nom fichier, valeur = traduction)



   const translations = {
    '1_39-L1V1_segment_18.mp3': 'j\'étudie',
    '1_39-L1V1_segment_30.mp3': 'syrien',
    '1_39-L1V1_segment_35.mp3': 'l\'arabe',
    '1_39-L1V1_segment_10.mp3': 'et',
    '1_39-L1V1_segment_15.mp3': 'Je',
    '1_39-L1V1_segment_27.mp3': 'noms',
    '1_39-L1V1_segment_3.mp3': 'l\'un de',
    '1_39-L1V1_segment_34.mp3': 'pluriel  françaises',
    '1_39-L1V1_segment_22.mp3': 'dialogue',
    '1_39-L1V1_segment_5.mp3': 'l\'une de',
    '1_39-L1V1_segment_8.mp3': 'dans / en',
    '1_39-L1V1_segment_42.mp3': 'enchanté',
    '1_39-L1V1_segment_29.mp3': 'libanais ,pluriel  libanais',
    '1_39-L1V1_segment_11.mp3': 'aussi',
    '1_39-L1V1_segment_12.mp3': 'quel est ... ?',
    '1_39-L1V1_segment_39.mp3': 'expressions',
    '1_39-L1V1_segment_25.mp3': 'nom, je m\'appelle',
    '1_39-L1V1_segment_17.mp3': 'étudier (passé, présent)',
    '1_39-L1V1_segment_13.mp3': 'habiter (passé)',
    '1_39-L1V1_segment_9.mp3': 'non',
    '1_39-L1V1_segment_4.mp3': 'une',
    '1_39-L1V1_segment_7.mp3': 'premiere',
    '1_39-L1V1_segment_24.mp3': 'dialogues',
    '1_39-L1V1_segment_2.mp3': 'un',
    '1_39-L1V1_segment_6.mp3': 'premier',
    '1_39-L1V1_segment_37.mp3': 'arabes',
    '1_39-L1V1_segment_32.mp3': 'syriens',
    '1_39-L1V1_segment_14.mp3': 'habiter (présent) - il habite',
    '1_39-L1V1_segment_40.mp3': 'salut',
    '1_39-L1V1_segment_41.mp3': 'bonjour, que la paix soit avec toi',
    '1_39-L1V1_segment_19.mp3': 'leçon /cours',
    '1_39-L1V1_segment_28.mp3': 'je m\'appelle',
    '1_39-L1V1_segment_21.mp3': 'leçons',
    '1_39-L1V1_segment_33.mp3': 'française',
    '1_39-L1V1_segment_16.mp3': 'j\'habite',
    '1_18-SEQ-6_segment_7.mp3': 'j\'étais',
    '1_9-SEQ-4-_segment_5.mp3': 'Rabat',
    '1_18-SEQ-6_segment_6.mp3': 'mois',
    '1_18-SEQ-6_segment_3.mp3': 'de',
    '1_14-SEQ-6_segment_9.mp3': 'grand',
    '1_35-SEQ-1_segment_14.mp3': 'Qu as-tu fait hier?',
    '1_35-SEQ-1_segment_13.mp3': 'Et toi',
    '1_3-SEQ-2-_segment_4.mp3': 'huile',
    '1_20-SEQ-7_segment_4.mp3': 'j\'aime',
    '1_2-SEQ-2-_segment_8.mp3': 'et',
    'Sequence-6_segment_9.mp3': 'policier',
    'Sequence-2_segment_5.mp3': 'maison',
    'Sequence-5_segment_12.mp3': 'ministre',
    '1_26-SEQ-7_segment_3.mp3': 'maintenant',
    '1_10-SEQ-5_segment_6.mp3': 'Nouveau',
    '1_24-SEQ-7_segment_2.mp3': 'nom',
    '1_18-SEQ-6_segment_17.mp3': 'exposition',
    'Sequence-6_segment_4.mp3': 'gentille',
    'Sequence-2_segment_8.mp3': 'Vouloir',
    '1_34-SEQ-1_segment_7.mp3': 'il (lui)',
    '1_12-SEQ-5_segment_7.mp3': 'dans',
    '1_35-SEQ-1_segment_2.mp3': 'Salut',
    'Sequence-8_segment_17.mp3': 'la fête',
    '1_31-SEQ-8_segment_12.mp3': '10',
    'Sequence-6_segment_15.mp3': 'comment',
    '1_5-SEQ-3-_segment_4.mp3': 'Paris',
    'Sequence-6_segment_4_6-12.mp3': 'il fait',
    '1_9-SEQ-4-_segment_8.mp3': 'étudiant',
    '1_18-SEQ-6_segment_13.mp3': 'comprendre',
    '1_7-SEQ-4-_segment_4.mp3': 'informer',
    'Sequence-7_segment_22.mp3': 'Londres',
    'Sequence-6_segment_13.mp3': 'oeuf',
    'Sequence-7_segment_1.mp3': 'J ai',
    'Sequence-5_segment_1.mp3': 'bien',
    'Sequence-4_segment_2.mp3': 'boulanger',
    '1_18-SEQ-6_segment_2.mp3': 'café',
    'Sequence-6_segment_20.mp3': 'sucre',
    '1_34-SEQ-1_segment_10.mp3': 'Elle a écrit',
    'Sequence-6_segment_18.mp3': 'mairie',
    '1_37-SEQ-1_segment_7.mp3': 'à Paris',
    '1_20-SEQ-7_segment_9.mp3': 'Je veux',
    'Sequence-8_segment_5.mp3': 'montagne',
    'Sequence-6_segment_13_6-12.mp3': 'mère',
    'Sequence-5_segment_2.mp3': 'épouse',
    'Sequence-5_segment_5.mp3': 'Bien',
    '1_10-SEQ-5_segment_8.mp3': 'Najat',
    '1_18-SEQ-6_segment_16.mp3': 'aller',
    'Sequence-4_segment_4.mp3': 'il a enseigné',
    'Sequence-7_segment_25.mp3': 'vélo',
    '1_18-SEQ-6_segment_21.mp3': 'adresse, titre',
    'Sequence-7_segment_18.mp3': 'ambassade',
    'Sequence-2_segment_1_2-5.mp3': 'porte',
    'Sequence-7_segment_23.mp3': 'Canada',
    'Sequence-8_segment_6.mp3': 'Lait',
    'Sequence-6_segment_16.mp3': 'tu vas ( comment ?)',
    '1_37-SEQ-1_segment_9.mp3': 'je suis allé en Syrie avec mon ami',
    'Sequence-5_segment_6.mp3': 'journal',
    'Sequence-7_segment_5.mp3': 'hier',
    'Sequence-6_segment_3.mp3': 'je t\'en prie',
    '1_18-SEQ-6_segment_10.mp3': 'ici',
    '1_35-SEQ-1_segment_10.mp3': 'puis',
    '1_5-SEQ-3-_segment_8.mp3': 'j\'ai étudié',
    '1_7-SEQ-4-_segment_2.mp3': 'aimer',
    'Sequence-8_segment_18.mp3': 'table',
    '1_3-SEQ-2-_segment_6.mp3': 'mûre',
    '1_16-SEQ-6_segment_5.mp3': 'école',
    '1_37-SEQ-1_segment_2.mp3': 'mon nom',
    '1_37-SEQ-1_segment_15.mp3': 'Je n aime pas le baqlawah',
    '1_31-SEQ-8_segment_11.mp3': '9',
    '1_12-SEQ-5_segment_8.mp3': 'heureux',
    'Sequence-4_segment_9.mp3': 'lait',
    'Sequence-7_segment_43.mp3': 'Bruxelles',
    '1_10-SEQ-5_segment_3.mp3': 'une',
    'Sequence-6_segment_1.mp3': 'Pays',
    '1_34-SEQ-1_segment_2.mp3': 'J ai écrit',
    'Sequence-4_segment_1.mp3': 'bien',
    'Sequence-6_segment_3_6-12.mp3': 'il travaille',
    '1_3-SEQ-2-_segment_2.mp3': 'porte',
    '1_16-SEQ-6_segment_8.mp3': 'restaurant',
    '1_16-SEQ-6_segment_13.mp3': 'paix',
    'Sequence-8_segment_11.mp3': 'hier',
    '1_14-SEQ-6_segment_6.mp3': 'chien',
    'Sequence-5_segment_11.mp3': 'Perméabilité',
    'Sequence-6_segment_14_6-12.mp3': 'nous',
    'Sequence-7_segment_34.mp3': 'Pays',
    '1_36-SEQ-1_segment_8.mp3': 'il (lui)',
    'Sequence-7_segment_27.mp3': 'malade',
    '1_35-SEQ-1_segment_8.mp3': 'hier',
    'Sequence-8_segment_14.mp3': 'Bureau',
    '1_14-SEQ-6_segment_3.mp3': 'Il dit',
    'Sequence-8_segment_2.mp3': 'Café',
    '1_31-SEQ-8_segment_5.mp3': 'trois',
    'Sequence-7_segment_37.mp3': 'content',
    'Sequence-7_segment_30.mp3': 'je resterai',
    'Sequence-7_segment_24.mp3': 'ou',
    'Sequence-6_segment_19.mp3': 'table',
    '1_37-SEQ-1_segment_6.mp3': 'J étudie l arabe',
    '1_16-SEQ-6_segment_3.mp3': 'âne',
    '1_16-SEQ-6_segment_18.mp3': 'quel est?',
    'Sequence-7_segment_33.mp3': 'menteur',
    '1_35-SEQ-1_segment_4.mp3': 'Je suis français',
    'Sequence-5_segment_14.mp3': 'révolution',
    'Sequence-6_segment_22.mp3': 'seulement',
    '1_22-SEQ-7_segment_4.mp3': 'verres',
    '1_31-SEQ-8_segment_8.mp3': '6',
    'Sequence-2_segment_4_2-5.mp3': 'froid',
    '1_36-SEQ-1_segment_5.mp3': 'Écrire',
    '1_9-SEQ-4-_segment_2.mp3': 'policier',
    'Sequence-5_segment_17.mp3': 'boulanger',
    'Sequence-7_segment_44.mp3': 'Berlin',
    '1_9-SEQ-4-_segment_7.mp3': 'il a demandé',
    'Sequence-6_segment_2.mp3': 'Halal',
    'Sequence-2_segment_14_2-5.mp3': 'ours',
    '1_24-SEQ-7_segment_4.mp3': 'Recevoir',
    'Sequence-7_segment_26.mp3': 'jardin',
    '1_35-SEQ-1_segment_9.mp3': 'J ai travaillé toute la journée',
    '1_7-SEQ-4-_segment_3.mp3': 'monsieur',
    'Sequence-6_segment_12.mp3': 'il écrit',
    '1_3-SEQ-2-_segment_5.mp3': 'pays',
    'Sequence-8_segment_16.mp3': 'une question',
    '1_3-SEQ-2-_segment_8.mp3': 'froid',
    '1_20-SEQ-7_segment_6.mp3': 'où',
    '1_31-SEQ-8_segment_6.mp3': '4',
    '1_37-SEQ-1_segment_13.mp3': 'j\'aime le houmos',
    '1_5-SEQ-3-_segment_7.mp3': 'étudier',
    'Sequence-7_segment_6.mp3': 'directrice',
    'Sequence-7_segment_46.mp3': 'Espagne',
    'Sequence-2_segment_6_2-5.mp3': 'mûre',
    'Sequence-7_segment_14.mp3': 'l\enseignante',
    '1_36-SEQ-1_segment_7.mp3': 'tu écris (F.)',
    '1_18-SEQ-6_segment_19.mp3': 'musée',
    'Sequence-6_segment_12_6-12.mp3': 'elle',
    '1_18-SEQ-6_segment_12.mp3': 'est-ce que ?',
    '1_18-SEQ-6_segment_11.mp3': 'execice',
    'Sequence-8_segment_7.mp3': 'Livre',
    '1_36-SEQ-1_segment_6.mp3': 'Toi',
    '1_20-SEQ-7_segment_3.mp3': 'mère',
    '1_28-SEQ-7_segment_5.mp3': 'j\'ai étudié l\'arabe à Paris',
    'Sequence-4_segment_8.mp3': 'qui(F,relatif)',
    'Sequence-5_segment_15.mp3': 'enseigner',
    '1_36-SEQ-1_segment_10.mp3': 'elle',
    '1_28-SEQ-7_segment_2.mp3': 'mon nom',
    '1_18-SEQ-6_segment_14.mp3': 'fruits',
    'Sequence-7_segment_3.mp3': 'tu as',
    'Sequence-7_segment_39.mp3': 'long',
    '1_22-SEQ-7_segment_3.mp3': 'question',
    '1_37-SEQ-1_segment_5.mp3': 'Je vis à Paris',
    '1_35-SEQ-1_segment_11.mp3': 'Je suis allé au café',
    '1_14-SEQ-6_segment_8.mp3': 'écrivain',
    '1_20-SEQ-7_segment_8.mp3': 'Toi',
    'Sequence-8_segment_10.mp3': 'Réunion',
    '1_14-SEQ-6_segment_7.mp3': 'il a écrit',
    'Sequence-7_segment_16.mp3': 'proche de',
    'Sequence-2_segment_9_2-5.mp3': 'des maisons',
    '1_31-SEQ-8_segment_10.mp3': '8',
    '1_12-SEQ-5_segment_9.mp3': 'Tareq',
    'Sequence-7_segment_45.mp3': 'Dubaï',
    'Sequence-6_segment_19_6-12.mp3': 'à côté de',
    'Sequence-4_segment_5.mp3': 'mer',
    'Sequence-4_segment_6.mp3': 'marin',
    '1_31-SEQ-8_segment_9.mp3': '7',
    'Sequence-2_segment_13_2-5.mp3': 'taureau',
    '1_37-SEQ-1_segment_14.mp3': 'Mais',
    '1_26-SEQ-7_segment_5.mp3': 'Aout',
    'Sequence-8_segment_13.mp3': 'Au revoir',
    '1_14-SEQ-6_segment_4.mp3': 'Monter',
    '1_28-SEQ-7_segment_6.mp3': 'Je suis allé en Tunisie en été',
    'Sequence-7_segment_41.mp3': 'café',
    '1_5-SEQ-3-_segment_2.mp3': 'thé',
    'Sequence-4_segment_3.mp3': 'Pèlerins',
    'Sequence-4_segment_7.mp3': 'qui(M, relatif)',
    'Sequence-2_segment_3_2-5.mp3': 'maison',
    '1_12-SEQ-5_segment_4.mp3': 'Il a dit',
    '1_18-SEQ-6_segment_20.mp3': 'seul',
    'Sequence-7_segment_28.mp3': 'besoin de',
    '1_35-SEQ-1_segment_7.mp3': 'à Paris aussi',
    'Sequence-7_segment_42.mp3': 'des jours',
    'Sequence-6_segment_11_6-12.mp3': 'il (lui)',
    '1_32-SEQ-9_segment_6.mp3': 'aussi',
    '1_31-SEQ-8_segment_3.mp3': '1',
    'Sequence-7_segment_29.mp3': 'dans',
    '1_35-SEQ-1_segment_6.mp3': 'j\'ai étudié l\'arabe',
    '1_36-SEQ-1_segment_3.mp3': 'j\'ai écrit',
    '1_5-SEQ-3-_segment_6.mp3': 'boire',
    '1_32-SEQ-9_segment_4.mp3': 'toujours',
    'Sequence-7_segment_2.mp3': 'tu as (m)',
    'Sequence-7_segment_19.mp3': 'assez',
    'Sequence-6_segment_17_6-12.mp3': 'puis',
    '1_35-SEQ-1_segment_3.mp3': 'Je m appelle Tamim',
    'Sequence-6_segment_10.mp3': 'il dit',
    '1_37-SEQ-1_segment_12.mp3': 'et de la salade',
    'Sequence-2_segment_2_2-5.mp3': 'pays',
    'Sequence-5_segment_10.mp3': 'voiture',
    'Sequence-7_segment_38.mp3': 'jus',
    '1_22-SEQ-7_segment_2.mp3': 'responsable',
    '1_2-SEQ-2-_segment_3.mp3': 'il a rendu visite',
    'Sequence-7_segment_21.mp3': 'Genève',
    '1_20-SEQ-7_segment_7.mp3': 'administration',
    'Sequence-8_segment_4.mp3': 'l\'étudiant',
    'Sequence-8_segment_12.mp3': 'Rue',
    '1_14-SEQ-6_segment_5.mp3': 'conte, histoire',
    'Sequence-7_segment_10.mp3': 'mon ami',
    '1_37-SEQ-1_segment_11.mp3': 'je mange du houmos et du falafel',
    'Sequence-2_segment_3.mp3': 'enfant',
    '1_10-SEQ-5_segment_5.mp3': 'poule',
    '1_32-SEQ-9_segment_9.mp3': 'un peu',
    '1_28-SEQ-7_segment_8.mp3': 'Où as-tu étudié l\'arabe ?',
    '1_16-SEQ-6_segment_9.mp3': 'discours, parole',
    '1_16-SEQ-6_segment_12.mp3': 'viande',
    'Sequence-7_segment_15.mp3': 'loin de',
    'Sequence-8_segment_1.mp3': 'Leçon',
    '1_31-SEQ-8_segment_7.mp3': '5',
    'Sequence-6_segment_9_6-12.mp3': 'fatigué',
    '1_32-SEQ-9_segment_7.mp3': 'jamais',
    'Sequence-7_segment_8.mp3': 'bien',
    '1_18-SEQ-6_segment_4.mp3': 'qu\'est-ce que ?',
    '1_24-SEQ-7_segment_5.mp3': 'utiliser',
    '1_2-SEQ-2-_segment_4.mp3': 'enfant',
    '1_12-SEQ-5_segment_2.mp3': 'train',
    '1_12-SEQ-5_segment_5.mp3': 'tu as demandé',
    '1_2-SEQ-2-_segment_2.mp3': 'maison',
    '1_35-SEQ-1_segment_5.mp3': 'J ai vécu à Paris',
    'Sequence-2_segment_7.mp3': 'ministre',
    '1_34-SEQ-1_segment_8.mp3': 'il a écrit',
    '1_26-SEQ-7_segment_4.mp3': 'père',
    '1_24-SEQ-7_segment_3.mp3': 'réunion',
    'Sequence-6_segment_7.mp3': 'livre',
    '1_34-SEQ-1_segment_4.mp3': 'as écrit (tu)',
    '1_37-SEQ-1_segment_4.mp3': 'Travailler dans',
    'Sequence-8_segment_9.mp3': 'Ministère',
    '1_7-SEQ-4-_segment_5.mp3': 'faire entrer',
    'Sequence-2_segment_8_2-5.mp3': 'robe',
    'Sequence-2_segment_10_2-5.mp3': 'Paris',
    'Sequence-6_segment_20_6-12.mp3': 'J ai',
    '1_16-SEQ-6_segment_4.mp3': 'vacances',
    'Sequence-6_segment_8_6-12.mp3': 'début',
    'Sequence-6_segment_17.mp3': 'bien',
    '1_37-SEQ-1_segment_8.mp3': 'Je parle arabe',
    '1_32-SEQ-9_segment_2.mp3': 'Merci',
    'Sequence-7_segment_7.mp3': 'maintenant',
    'Sequence-6_segment_5.mp3': 'cahier',
    'Sequence-2_segment_9.mp3': 'Délicieux',
    '1_34-SEQ-1_segment_6.mp3': 'as écrit (Tu f.)',
    '1_16-SEQ-6_segment_10.mp3': 'nord',
    'Sequence-7_segment_17.mp3': 'ministere',
    'Sequence-6_segment_1_6-12.mp3': 'je comprends',
    '1_37-SEQ-1_segment_10.mp3': 'Nous mangeons dans un restaurant',
    '1_5-SEQ-3-_segment_5.mp3': 'veillard, cheikh',
    'Sequence-6_segment_8.mp3': 'pendant',
    'Sequence-2_segment_4.mp3': 'Mon fils',
    '1_9-SEQ-4-_segment_9.mp3': 'cuisiner',
    'Sequence-7_segment_9.mp3': 'Mon pauvre',
    '1_2-SEQ-2-_segment_6.mp3': 'il visite',
    'Sequence-8_segment_8.mp3': 'Carnet de notes',
    '1_16-SEQ-6_segment_6.mp3': 'problème',
    'Sequence-6_segment_10_6-12.mp3': 'non',
    'Sequence-7_segment_40.mp3': 'les gens',
    '1_9-SEQ-4-_segment_3.mp3': 'bon',
    '1_36-SEQ-1_segment_11.mp3': 'il écrit',
    '1_28-SEQ-7_segment_3.mp3': 'Je suis français',
    '1_28-SEQ-7_segment_4.mp3': 'j\'ai habité à Paris',
    'Sequence-2_segment_10.mp3': 'Riz',
    '1_2-SEQ-2-_segment_5.mp3': 'Lisa',
    '1_16-SEQ-6_segment_17.mp3': 'soleil',
    'Sequence-8_segment_19.mp3': 'avion',
    '1_3-SEQ-2-_segment_7.mp3': 'vêtements',
    '1_31-SEQ-8_segment_2.mp3': '0',
    '1_16-SEQ-6_segment_11.mp3': 'université',
    '1_16-SEQ-6_segment_7.mp3': 'lune',
    'Sequence-6_segment_11.mp3': 'il sait',
    '1_28-SEQ-7_segment_7.mp3': 'Et toi',
    'Sequence-5_segment_4.mp3': 'fiancée',
    'Sequence-5_segment_3.mp3': 'cher',
    '1_18-SEQ-6_segment_8.mp3': 'là-bas',
    'Sequence-2_segment_11_2-5.mp3': 'Beyrouth',
    '1_18-SEQ-6_segment_15.mp3': 'Visages',
    'Sequence-5_segment_8.mp3': 'verser',
    '1_12-SEQ-5_segment_6.mp3': 'campagne',
    '1_36-SEQ-1_segment_4.mp3': 'Toi',
    '1_20-SEQ-7_segment_5.mp3': 'semaine',
    'Sequence-7_segment_11.mp3': 'mes amis',
    'Sequence-6_segment_14.mp3': 'j\'ai écrit',
    '1_5-SEQ-3-_segment_3.mp3': 'gauche',
    '1_2-SEQ-2-_segment_7.mp3': 'vallée',
    '1_3-SEQ-2-_segment_3.mp3': 'maison',
    '1_36-SEQ-1_segment_9.mp3': 'Il écrit',
    'Sequence-5_segment_13.mp3': 'œuf',
    'Sequence-7_segment_12.mp3': 'excellent',
    '1_10-SEQ-5_segment_2.mp3': 'journal',
    'Sequence-5_segment_7.mp3': 'milieu',
    'Sequence-7_segment_35.mp3': 'triste',
    'Sequence-6_segment_6.mp3': 'grand',
    '1_34-SEQ-1_segment_5.mp3': 'Toi (Fem)',
    '1_35-SEQ-1_segment_12.mp3': 'Et j ai bu du café',
    '1_16-SEQ-6_segment_15.mp3': 'parler',
    '1_37-SEQ-1_segment_3.mp3': 'Je suis français',
    'Sequence-2_segment_7_2-5.mp3': 'puit',
    '1_9-SEQ-4-_segment_4.mp3': 'chance',
    '1_16-SEQ-6_segment_16.mp3': 'jour',
    '1_36-SEQ-1_segment_2.mp3': 'je',
    'Sequence-7_segment_31.mp3': '(le)commerce',
    '1_9-SEQ-4-_segment_6.mp3': 'médecin',
    '1_32-SEQ-9_segment_3.mp3': 'de rien (pardon)',
    '1_18-SEQ-6_segment_9.mp3': 'étage',
    'Sequence-7_segment_36.mp3': 'poisson',
    '1_26-SEQ-7_segment_2.mp3': 'désolé',
    '1_10-SEQ-5_segment_7.mp3': 'début',
    'Sequence-6_segment_15_6-12.mp3': 'Oui',
    'Sequence-6_segment_21.mp3': 'moteur',
    'Sequence-6_segment_5_6-12.mp3': 'pourquoi',
    '1_7-SEQ-4-_segment_6.mp3': 'faire le pélirinage',
    'Sequence-6_segment_6_6-12.mp3': 'exercice',
    '1_20-SEQ-7_segment_2.mp3': 'père',
    '1_10-SEQ-5_segment_4.mp3': 'voiture',
    'Sequence-6_segment_18_6-12.mp3': 'il s\'est assis',
    '1_32-SEQ-9_segment_5.mp3': 'bien sûr',
    '1_34-SEQ-1_segment_3.mp3': 'Toi',
    '1_16-SEQ-6_segment_14.mp3': 'avec',
    'Sequence-6_segment_2_6-12.mp3': 'la parole',
    'Sequence-8_segment_3.mp3': 'Vacances',
    'Sequence-7_segment_13.mp3': 'l\'aéropor',
    'Sequence-2_segment_12_2-5.mp3': 'la poste',
    'Sequence-7_segment_4.mp3': 'Il a',
    'Sequence-6_segment_16_6-12.mp3': 'regarde',
    'Sequence-7_segment_32.mp3': 'Fromage',
    '1_18-SEQ-6_segment_18.mp3': 'bateau',
    'Sequence-5_segment_16.mp3': 'Dame',
    '1_32-SEQ-9_segment_8.mp3': 'beaucoup',
    'Sequence-2_segment_2.mp3': 'Mains',
    '1_18-SEQ-6_segment_5.mp3': 'qui ?',
    'Sequence-2_segment_5_2-5.mp3': 'j\ai visité',
    'Sequence-5_segment_9.mp3': 'oiseau',
    'Sequence-6_segment_7_6-12.mp3': 'fin',
    'Sequence-7_segment_20.mp3': 'Luxembourg',
    '1_12-SEQ-5_segment_3.mp3': 'ami',
    '1_7-SEQ-4-_segment_7.mp3': 'répéter',
    'Sequence-8_segment_15.mp3': 'hôtel',
    '1_14-SEQ-6_segment_2.mp3': 'comment',
    '1_2-SEQ-2-_segment_9.mp3': 'ZAI',
    '1_31-SEQ-8_segment_4.mp3': 'deux',
    'Sequence-2_segment_1.mp3': 'main',
    'Sequence-2_segment_6.mp3': 'amende',
    '1_34-SEQ-1_segment_9.mp3': 'elle',
};

const translations_ar= {
   '1_39-L1V1_segment_18.mp3': 'أَدْرُسُ',
    '1_39-L1V1_segment_30.mp3': 'سُورِيٌّ',
    '1_39-L1V1_segment_35.mp3': 'العَرَبِيَّةُ',
    '1_39-L1V1_segment_10.mp3': 'وَ',
    '1_39-L1V1_segment_15.mp3': 'أَنَا',
    '1_39-L1V1_segment_27.mp3': 'أَسْمَاءٌ',
    '1_39-L1V1_segment_3.mp3': 'أَخَذَ',
    '1_39-L1V1_segment_34.mp3': 'جَمْعُ المُؤَنَّثِ الفَرَنْسِيُّ', // Corrected based on context "pluriel françaises"
    '1_39-L1V1_segment_22.mp3': 'حِوَارٌ',
    '1_39-L1V1_segment_5.mp3': 'إِخْذَى',
    '1_39-L1V1_segment_8.mp3': 'فِي',
    '1_39-L1V1_segment_42.mp3': 'تَشَرَّفْنَا', // Common expression for "enchanté"
    '1_39-L1V1_segment_29.mp3': 'لُبْنَانِيٌّ، جَمْعُ لُبْنَانِيِّينَ', // Adjusted for "libanais ,pluriel libanais"
    '1_39-L1V1_segment_11.mp3': 'أَيْضًا',
    '1_39-L1V1_segment_12.mp3': 'مَا هُوَ ...؟',
    '1_39-L1V1_segment_39.mp3': 'تَعْبِيرَاتٌ',
    '1_39-L1V1_segment_25.mp3': 'اِسْمٌ، اِسْمِي', // Corrected for "nom, je m'appelle"
    '1_39-L1V1_segment_17.mp3': 'دَرَسَ (مَاضٍ)، يَدْرُسُ (مُضَارِعٌ)', // Adjusted for "étudier (passé, présent)"
    '1_39-L1V1_segment_13.mp3': 'سَكَنَ (مَاضٍ)',
    '1_39-L1V1_segment_9.mp3': 'لَا',
    '1_39-L1V1_segment_4.mp3': 'وَاحِدَةٌ',
    '1_39-L1V1_segment_7.mp3': 'الأُولَى',
    '1_39-L1V1_segment_24.mp3': 'حِوَارَاتٌ',
    '1_39-L1V1_segment_2.mp3': 'وَاحِدٌ',
    '1_39-L1V1_segment_6.mp3': 'الأَوَّلُ',
    '1_39-L1V1_segment_37.mp3': 'عَرَبٌ', // More common plural for "arabes"
    '1_39-L1V1_segment_32.mp3': 'سُورِيُّونَ',
    '1_39-L1V1_segment_14.mp3': 'يَسْكُنُ (مُضَارِعٌ) - هُوَ يَسْكُنُ',
    '1_39-L1V1_segment_40.mp3': 'مَرْحَبًا',
    '1_39-L1V1_segment_41.mp3': 'السَّلَامُ عَلَيْكُمْ', // Common greeting "bonjour, que la paix soit avec toi" (plural form is more standard)
    '1_39-L1V1_segment_19.mp3': 'دَرْسٌ', // Simplified from "leçon /cours"
    '1_39-L1V1_segment_28.mp3': 'اِسْمِي', // Corrected for "je m'appelle"
    '1_39-L1V1_segment_21.mp3': 'دُرُوسٌ',
    '1_39-L1V1_segment_33.mp3': 'فَرَنْسِيَّةٌ',
    '1_39-L1V1_segment_16.mp3': 'أَسْكُنُ', // Corrected for "j'habite" (assuming typo in original j") 
  '1_18-SEQ-6_segment_7.mp3': 'كُنْتُ', // j'étais
  '1_9-SEQ-4-_segment_5.mp3': 'الرِّبَاطِ', // Rabat
  '1_18-SEQ-6_segment_6.mp3': 'شَهْرٌ', // mois
  '1_18-SEQ-6_segment_3.mp3': 'مِنْ', // de
  '1_14-SEQ-6_segment_9.mp3': 'كَبِيرٌ', // grand
  '1_35-SEQ-1_segment_14.mp3': 'مَاذَا فَعَلْتَ أَمْسِ؟', // Qu as-tu fait hier?
  '1_35-SEQ-1_segment_13.mp3': 'وَأَنْتَ؟', // Et toi
  '1_3-SEQ-2-_segment_4.mp3': 'زَيْتٌ', // huile
  '1_20-SEQ-7_segment_4.mp3': 'أُحِبُّ', // j'aime
  '1_2-SEQ-2-_segment_8.mp3': 'وَ', // et
  'Sequence-6_segment_9.mp3': 'شُرْطِيٌّ', // policier
  'Sequence-2_segment_5.mp3': 'بَيْتٌ', // maison
  'Sequence-5_segment_12.mp3': 'وَزِيرٌ', // ministre
  '1_26-SEQ-7_segment_3.mp3': 'الْآنَ', // maintenant
  '1_10-SEQ-5_segment_6.mp3': 'جَدِيدٌ', // Nouveau
  '1_24-SEQ-7_segment_2.mp3': 'اسْمٌ', // nom
  '1_18-SEQ-6_segment_17.mp3': 'مَعْرِضٌ', // exposition
  'Sequence-6_segment_4.mp3': 'طَيِّبَةٌ', // gentille
  'Sequence-2_segment_8.mp3': 'أُرِيدُ', // Vouloir
  '1_34-SEQ-1_segment_7.mp3': 'هُوَ', // il (lui)
  '1_12-SEQ-5_segment_7.mp3': 'فِي', // dans
  '1_35-SEQ-1_segment_2.mp3': 'السَّلَامُ عَلَيْكُمْ', // Salut
  'Sequence-8_segment_17.mp3': 'الحَفْلَةُ', // la fête
  '1_31-SEQ-8_segment_12.mp3': 'عَشَرَةُ', // 10
  'Sequence-6_segment_15.mp3': 'كَيْفَ', // comment
  '1_5-SEQ-3-_segment_4.mp3': 'بَارِيسَ', // Paris
  'Sequence-6_segment_4_6-12.mp3': 'يَفْعَلُ', // il fait
  '1_9-SEQ-4-_segment_8.mp3': 'طَالِبٌ', // étudiant
  '1_18-SEQ-6_segment_13.mp3': 'أَفْهَمُ', // comprendre
  '1_7-SEQ-4-_segment_4.mp3': 'أُخْبِرُ', // informer
  'Sequence-7_segment_22.mp3': 'لَنْدَنُ', // Londres
  'Sequence-6_segment_13.mp3': 'بَيْضَةٌ', // oeuf
  'Sequence-7_segment_1.mp3': 'عِنْدِي', // J ai
  'Sequence-5_segment_1.mp3': 'جَيِّدٌ', // bien
  'Sequence-4_segment_2.mp3': 'خَبَّازٌ', // boulanger
  '1_18-SEQ-6_segment_2.mp3': 'قَهْوَةٌ', // café
  'Sequence-6_segment_20.mp3': 'سُكَّرٌ', // sucre
  '1_34-SEQ-1_segment_10.mp3': 'كَتَبَتْ', // Elle a écrit
  'Sequence-6_segment_18.mp3': 'بَلَدِيَّةٌ', // mairie
  '1_37-SEQ-1_segment_7.mp3': 'فِي بَارِيسَ', // à Paris
  '1_20-SEQ-7_segment_9.mp3': 'أُرِيدُ', // Je veux
  'Sequence-8_segment_5.mp3': 'جَبَلٌ', // Montagne
  'Sequence-6_segment_13_6-12.mp3': 'أُمٌّ', // mère
  'Sequence-5_segment_2.mp3': 'زَوْجَةٌ', // épouse
  'Sequence-5_segment_5.mp3': 'حَسَنًا', // Bien
  '1_10-SEQ-5_segment_8.mp3': 'نَجَاتٌ', // Najat
  '1_18-SEQ-6_segment_16.mp3': 'أَذْهَبُ', // aller
  'Sequence-4_segment_4.mp3': 'دَرَّسَ', // il a enseigné
  'Sequence-7_segment_25.mp3': 'دَرَّاجَةٌ', // vélo
  '1_18-SEQ-6_segment_21.mp3': 'عُنْوَانٌ', // adresse
  'Sequence-7_segment_18.mp3': 'سِفَارَةٌ', // ambassade
  'Sequence-2_segment_1_2-5.mp3': 'بَابٌ', // porte
  'Sequence-7_segment_23.mp3': 'كَانَدَا', // Canada
  'Sequence-8_segment_6.mp3': 'لَبَنٌ', // Lait
  'Sequence-6_segment_16.mp3': 'تَذْهَبُ', // tu vas
  '1_37-SEQ-1_segment_9.mp3': 'ذَهَبْتُ إِلَى سُورِيَا مَعَ صَدِيقِي', // je suis allé en Syrie avec mon ami
  'Sequence-5_segment_6.mp3': 'صَحِيفَةٌ', // journal
  'Sequence-7_segment_5.mp3': 'أَمْسِ', // hier
  'Sequence-6_segment_3.mp3': 'عَفْوًا', // je t'en prie
  '1_18-SEQ-6_segment_10.mp3': 'هُنَا', // ici
  '1_35-SEQ-1_segment_10.mp3': 'ثُمَّ', // puis
  '1_5-SEQ-3-_segment_8.mp3': 'دَرَسْتُ', // j'ai étudié
  '1_7-SEQ-4-_segment_2.mp3': 'أُحِبُّ', // aimer
  'Sequence-8_segment_18.mp3': 'طَاوِلَةٌ', // table
  '1_3-SEQ-2-_segment_6.mp3': 'تُوتٌ', // mûre
  '1_16-SEQ-6_segment_5.mp3': 'مَدْرَسَةٌ', // école
  '1_37-SEQ-1_segment_2.mp3': 'اسْمِي', // mon nom
  '1_37-SEQ-1_segment_15.mp3': 'لَا أُحِبُّ البَقْلَاوَةَ', // Je n aime pas le baqlawah
  '1_31-SEQ-8_segment_11.mp3': 'تِسْعَةُ', // 9
  '1_12-SEQ-5_segment_8.mp3': 'سَعِيدٌ', // heureux
  'Sequence-4_segment_9.mp3': 'لَبَنٌ', // lait
  'Sequence-7_segment_43.mp3': 'بْرُوكْسَلْ', // Bruxelles
  '1_10-SEQ-5_segment_3.mp3': 'وَاحِدَةٌ', // une
  'Sequence-6_segment_1.mp3': 'بَلَدٌ', // Pays
  '1_34-SEQ-1_segment_2.mp3': 'كَتَبْتُ', // J ai écrit
  'Sequence-4_segment_1.mp3': 'بِخَيْرٍ', // bien
  'Sequence-6_segment_3_6-12.mp3': 'يَعْمَلُ', // il travaille
  '1_3-SEQ-2-_segment_2.mp3': 'بَابٌ', // porte
  '1_16-SEQ-6_segment_8.mp3': 'مَطْعَمٌ', // restaurant
  '1_16-SEQ-6_segment_13.mp3': 'سَلَامٌ', // paix
  'Sequence-8_segment_11.mp3': 'أَمْسِ', // hier
  '1_14-SEQ-6_segment_6.mp3': 'كَلْبٌ', // chien
  'Sequence-5_segment_11.mp3': 'نَفَاذِيَّةٌ', // Perméabilité
  'Sequence-6_segment_14_6-12.mp3': 'نَحْنُ', // nous
  'Sequence-7_segment_34.mp3': 'بَلَدٌ', // Pays
  '1_36-SEQ-1_segment_8.mp3': 'هُوَ', // il (lui)
  'Sequence-7_segment_27.mp3': 'مَرِيضٌ', // malade
  '1_35-SEQ-1_segment_8.mp3': 'أَمْسِ', // hier
  'Sequence-8_segment_14.mp3': 'مَكْتَبٌ', // Bureau
  '1_14-SEQ-6_segment_3.mp3': 'يَقُولُ', // Il dit
  'Sequence-8_segment_2.mp3': 'قَهْوَةٌ', // Café
  '1_31-SEQ-8_segment_5.mp3': 'ثَلَاثَةُ', // trois
  'Sequence-7_segment_37.mp3': 'فَرِحٌ', // content
  'Sequence-7_segment_30.mp3': 'سَأَبْقَى', // je resterai
  'Sequence-7_segment_24.mp3': 'أَوْ', // ou
  'Sequence-6_segment_19.mp3': 'طَاوِلَةٌ', // table
  '1_37-SEQ-1_segment_6.mp3': 'أَدْرُسُ العَرَبِيَّةَ', // J étudie l arabe
  '1_16-SEQ-6_segment_3.mp3': 'حِمَارٌ', // âne
  '1_16-SEQ-6_segment_18.mp3': 'مَا هُوَ؟', // quel est?
  'Sequence-7_segment_33.mp3': 'كَذَّابٌ', // menteur
  '1_35-SEQ-1_segment_4.mp3': 'أَنَا فَرَنْسِيٌّ', // Je suis français
  'Sequence-5_segment_14.mp3': 'ثَوْرَةٌ', // révolution
  'Sequence-6_segment_22.mp3': 'فَقَطْ', // seulement
  '1_22-SEQ-7_segment_4.mp3': 'نَظَّارَاتٌ', // verres
  '1_31-SEQ-8_segment_8.mp3': 'سِتَّةُ', // 6
  'Sequence-2_segment_4_2-5.mp3': 'بَارِدٌ', // froid
  '1_36-SEQ-1_segment_5.mp3': 'كَتَبَ', // Écrire
  '1_9-SEQ-4-_segment_2.mp3': 'شُرْطِيٌّ', // policier
  'Sequence-5_segment_17.mp3': 'خَبَّازٌ', // boulanger
  'Sequence-7_segment_44.mp3': 'بِرْلِينْ', // Berlin
  '1_9-SEQ-4-_segment_7.mp3': 'سَأَلَ', // (il a demandé)
  'Sequence-6_segment_2.mp3': 'حَلَالٌ', // Halal
  'Sequence-2_segment_14_2-5.mp3': 'دُبٌّ', // ours
  '1_24-SEQ-7_segment_4.mp3': 'اسْتِقْبَالٌ', // Recevoir
  'Sequence-7_segment_26.mp3': 'حَدِيقَةٌ', // jardin
  '1_35-SEQ-1_segment_9.mp3': 'عَمِلْتُ طُولَ النَّهَارِ', // J ai travaillé toute la journée
  '1_7-SEQ-4-_segment_3.mp3': 'سَيِّدٌ', // monsieur
  'Sequence-6_segment_12.mp3': 'يَكْتُبُ', // il écrit
  '1_3-SEQ-2-_segment_5.mp3': 'بَلَدٌ', // pays
  'Sequence-8_segment_16.mp3': 'سُؤَالٌ', // une question
  '1_3-SEQ-2-_segment_8.mp3': 'بَارِدٌ', // froid
  '1_20-SEQ-7_segment_6.mp3': 'أَيْنَ', // où
  '1_31-SEQ-8_segment_6.mp3': 'أَرْبَعَةُ', // 4
  '1_37-SEQ-1_segment_13.mp3': 'أُحِبُّ الحُمُّصَ', // j'aime le houmos
  '1_5-SEQ-3-_segment_7.mp3': 'دَرَسَ', // étudier
  'Sequence-7_segment_6.mp3': 'مُدِيرَةٌ', // directrice
  'Sequence-7_segment_46.mp3': 'إِسْبَانِيَا', // Espagne
  'Sequence-2_segment_6_2-5.mp3': 'تُوتٌ', // mûre
  'Sequence-7_segment_14.mp3': 'المُعَلِّمَةُ', // l'enseignante
  '1_36-SEQ-1_segment_7.mp3': 'كَتَبْتِ', // tu écris (F.)
  '1_18-SEQ-6_segment_19.mp3': 'مَتْحَفٌ', // musée
  'Sequence-6_segment_12_6-12.mp3': 'هِيَ', // elle
  '1_18-SEQ-6_segment_12.mp3': 'هَلْ', // est-ce que ?
  '1_18-SEQ-6_segment_11.mp3': 'تَمْرِينٌ', // exercice
  'Sequence-8_segment_7.mp3': 'كِتَابٌ', // Livre
  '1_36-SEQ-1_segment_6.mp3': 'أَنْتَ', // Toi
  '1_20-SEQ-7_segment_3.mp3': 'أُمٌّ', // mère
  '1_28-SEQ-7_segment_5.mp3': 'دَرَسْتُ العَرَبِيَّةَ فِي بَارِيسَ', // j'ai étudié l'arabe à Paris
  'Sequence-4_segment_8.mp3': 'الَّتِي', // qui(F,relatif)
  'Sequence-5_segment_15.mp3': 'دَرَّسَ', // enseigner
  '1_36-SEQ-1_segment_10.mp3': 'هِيَ', // elle
  '1_28-SEQ-7_segment_2.mp3': 'اسْمِي', // mon nom
  '1_18-SEQ-6_segment_14.mp3': 'فَوَاكِهُ', // fruits
  'Sequence-7_segment_3.mp3': 'عِنْدَكَ', // tu as
  'Sequence-7_segment_39.mp3': 'طَوِيلٌ', // long
  '1_22-SEQ-7_segment_3.mp3': 'سُؤَالٌ', // question
  '1_37-SEQ-1_segment_5.mp3': 'أَعِيشُ فِي بَارِيسَ', // Je vis à Paris
  '1_35-SEQ-1_segment_11.mp3': 'ذَهَبْتُ إِلَى المَقْهَى', // Je suis allé au café
  '1_14-SEQ-6_segment_8.mp3': 'كَاتِبٌ', // écrivain
  '1_20-SEQ-7_segment_8.mp3': 'أَنْتَ', // Toi
  'Sequence-8_segment_10.mp3': 'اِجْتِمَاعٌ', // Réunion
  '1_14-SEQ-6_segment_7.mp3': 'كَتَبَ', // il a écrit
  'Sequence-7_segment_16.mp3': 'قُرْبَ', // proche de
  'Sequence-2_segment_9_2-5.mp3': 'بُيُوتٌ', // des maisons
  '1_31-SEQ-8_segment_10.mp3': 'ثَمَانِيَةُ', // 8
  '1_12-SEQ-5_segment_9.mp3': 'طَارِقٌ', // Tareq
  'Sequence-7_segment_45.mp3': 'دُبَّى', // Dubaï
  'Sequence-6_segment_19_6-12.mp3': 'بِجَانِبِ', // à côté de
  'Sequence-4_segment_5.mp3': 'بَحْرٌ', // mer
  'Sequence-4_segment_6.mp3': 'بَحَّارٌ', // marin
  '1_31-SEQ-8_segment_9.mp3': 'سَبْعَةُ', // 7
  'Sequence-2_segment_13_2-5.mp3': 'ثَوْرٌ', // taureau
  '1_37-SEQ-1_segment_14.mp3': 'لَكِنْ', // Mais
  '1_26-SEQ-7_segment_5.mp3': 'آبٌ', // Aout
  'Sequence-8_segment_13.mp3': 'إِلَى اللِّقَاءِ', // Au revoir
  '1_14-SEQ-6_segment_4.mp3': 'صَعِدَ', // Monter
  '1_28-SEQ-7_segment_6.mp3': 'ذَهَبْتُ إِلَى تُونُسَ فِي الصَّيْفِ', // Je suis allé en Tunisie en été
  'Sequence-7_segment_41.mp3': 'مَقْهًى', // café
  '1_5-SEQ-3-_segment_2.mp3': 'شَايٌ', // thé
  'Sequence-4_segment_3.mp3': 'حُجَّاجٌ', // Pèlerins
  'Sequence-4_segment_7.mp3': 'الَّذِي', // qui(M, relatif)
  'Sequence-2_segment_3_2-5.mp3': 'بَيْتٌ', // maison
  '1_12-SEQ-5_segment_4.mp3': 'قَالَ', // Il a dit
  '1_18-SEQ-6_segment_20.mp3': 'وَحِيدٌ', // seul
  'Sequence-7_segment_28.mp3': 'حَاجَةٌ إِلَى', // besoin de
  '1_35-SEQ-1_segment_7.mp3': 'فِي بَارِيسَ أَيْضًا', // à Paris aussi
  'Sequence-7_segment_42.mp3': 'أَيَّامٌ', // des jours
  'Sequence-6_segment_11_6-12.mp3': 'هُوَ', // il (lui)
  '1_32-SEQ-9_segment_6.mp3': 'أَيْضًا', // aussi
  '1_31-SEQ-8_segment_3.mp3': 'وَاحِدٌ', // 1
  'Sequence-7_segment_29.mp3': 'فِي', // dans
  '1_35-SEQ-1_segment_6.mp3': 'دَرَسْتُ العَرَبِيَّةَ', // j'ai étudié l'arabe
  '1_36-SEQ-1_segment_3.mp3': 'كَتَبْتُ', // j'ai écrit
  '1_5-SEQ-3-_segment_6.mp3': 'شَرِبَ', // boire
  '1_32-SEQ-9_segment_4.mp3': 'دَائِمًا', // toujours
  'Sequence-7_segment_2.mp3': 'عِنْدَكَ', // tu as (m)
  'Sequence-7_segment_19.mp3': 'كَافٍ', // assez
  'Sequence-6_segment_17_6-12.mp3': 'ثُمَّ', // puis
  '1_35-SEQ-1_segment_3.mp3': 'أَسْمِي تَمِيمٌ', // Je m appelle Tamim
  'Sequence-6_segment_10.mp3': 'يَقُولُ', // il dit
  '1_37-SEQ-1_segment_12.mp3': 'وَسَلَطَةٌ', // et de la salade
  'Sequence-2_segment_2_2-5.mp3': 'بَلَدٌ', // pays
  'Sequence-5_segment_10.mp3': 'سَيَّارَةٌ', // voiture
  'Sequence-7_segment_38.mp3': 'عَصِيرٌ', // jus
  '1_22-SEQ-7_segment_2.mp3': 'مَسْؤُولٌ', // responsable
  '1_2-SEQ-2-_segment_3.mp3': 'زَارَ', // il a rendu visite
  'Sequence-7_segment_21.mp3': 'جِنِيفْ', // Genève
  '1_20-SEQ-7_segment_7.mp3': 'إِدَارَةٌ', // administration
  'Sequence-8_segment_4.mp3': 'الطَّالِبُ', // l'étudiant
  'Sequence-8_segment_12.mp3': 'شَارِعٌ', // Rue
  '1_14-SEQ-6_segment_5.mp3': 'حِكَايَةٌ', // conte, histoire
  'Sequence-7_segment_10.mp3': 'صَدِيقِي', // mon ami
  '1_37-SEQ-1_segment_11.mp3': 'آكُلُ الحُمُّصَ وَالفَلَافِلَ', // je mange du houmos et du falafel
  '1_16-SEQ-6_segment_19.mp3': 'خِطَابٌ', // discours, parole
  '1_16-SEQ-6_segment_12.mp3': 'لَحْمٌ', // viande
  'Sequence-7_segment_15.mp3': 'بَعِيدٌ عَنْ', // loin de
  'Sequence-8_segment_1.mp3': 'دَرْسٌ', // Leçon
  '1_31-SEQ-8_segment_7.mp3': 'خَمْسَةٌ', // 5
  'Sequence-6_segment_9_6-12.mp3': 'مُتْعَبٌ', // fatigué
  '1_32-SEQ-9_segment_7.mp3': 'أَبَدًا', // jamais
  'Sequence-7_segment_8.mp3': 'جَيِّدٌ', // bien
  '1_18-SEQ-6_segment_4.mp3': 'مَا هُوَ؟', // qu'est-ce que ?
  '1_24-SEQ-7_segment_5.mp3': 'يَسْتَعْمِلُ', // utiliser
  '1_2-SEQ-2-_segment_4.mp3': 'طِفْلٌ', // enfant
  '1_12-SEQ-5_segment_2.mp3': 'قِطَارٌ', // train
  '1_12-SEQ-5_segment_5.mp3': 'طَلَبْتَ', // tu as demandé
  '1_2-SEQ-2-_segment_2.mp3': 'بَيْتٌ', // maison
  '1_35-SEQ-1_segment_5.mp3': 'عِشْتُ فِي بَارِيسَ', // J ai vécu à Paris
  'Sequence-2_segment_7.mp3': 'وَزِيرٌ', // ministre
  '1_34-SEQ-1_segment_8.mp3': 'كَتَبَ', // il a écrit
  '1_26-SEQ-7_segment_4.mp3': 'أَبٌ', // père
  '1_24-SEQ-7_segment_3.mp3': 'اِجْتِمَاعٌ', // réunion
  'Sequence-6_segment_7.mp3': 'كِتَابٌ', // livre
  '1_34-SEQ-1_segment_4.mp3': 'كُتِبْتِ', // as écrit (tu)
  '1_37-SEQ-1_segment_4.mp3': 'يَعْمَلُ فِي', // Travailler dans
  'Sequence-8_segment_9.mp3': 'وِزَارَةٌ', // Ministère
  '1_7-SEQ-4-_segment_5.mp3': 'أَدْخَلَ', // faire entrer
  'Sequence-2_segment_8_2-5.mp3': 'جَلَبَابٌ', // robe
  'Sequence-2_segment_10_2-5.mp3': 'بَارِيسَ', // Paris
  'Sequence-6_segment_20_6-12.mp3': 'عِنْدِي', // J ai
  '1_16-SEQ-6_segment_4.mp3': 'عُطْلَةٌ', // vacances
  'Sequence-6_segment_8_6-12.mp3': 'بِدَايَةٌ', // début
  'Sequence-6_segment_17.mp3': 'جَيِّدٌ', // bien
  '1_37-SEQ-1_segment_8.mp3': 'أَتَكَلَّمُ العَرَبِيَّةَ', // Je parle arabe
  '1_32-SEQ-9_segment_2.mp3': 'شُكْرًا', // Merci
  'Sequence-7_segment_7.mp3': 'الْآنَ', // maintenant
  'Sequence-6_segment_5.mp3': 'دَفْتَرٌ', // cahier
  'Sequence-2_segment_9.mp3': 'لَذِيذٌ', // Délicieux
  '1_34-SEQ-1_segment_6.mp3': 'كُتِبْتِ', // as écrit (Tu f.)
  '1_16-SEQ-6_segment_10.mp3': 'شَمَالٌ', // nord
  'Sequence-7_segment_17.mp3': 'وِزَارَةٌ', // ministère
  'Sequence-6_segment_1_6-12.mp3': 'أَفْهَمُ', // je comprends
  '1_37-SEQ-1_segment_10.mp3': 'نَأْكُلُ فِي مَطْعَمٍ', // Nous mangeons dans un restaurant
  '1_5-SEQ-3-_segment_5.mp3': 'شَيْخٌ', // vieillard, cheikh
  'Sequence-6_segment_8.mp3': 'أَثْنَاءَ', // pendant
  'Sequence-2_segment_4.mp3': 'اِبْنِي', // Mon fils
  '1_9-SEQ-4-_segment_9.mp3': 'يَطْبُخُ', // cuisiner
  'Sequence-7_segment_9.mp3': 'مِسْكِينِي', // Mon pauvre
  '1_2-SEQ-2-_segment_6.mp3': 'يَزُورُ', // il visite
  'Sequence-8_segment_8.mp3': 'دَفْتَرُ الدَّرَجَاتِ', // Carnet de notes
  '1_16-SEQ-6_segment_6.mp3': 'مُشْكِلَةٌ', // problème
  'Sequence-6_segment_10_6-12.mp3': 'لَا', // non
  'Sequence-7_segment_40.mp3': 'النَّاسُ', // les gens
  '1_9-SEQ-4-_segment_3.mp3': 'جَيِّدٌ', // bon
  '1_36-SEQ-1_segment_11.mp3': 'يَكْتُبُ', // il écrit
  '1_28-SEQ-7_segment_3.mp3': 'أَنَا فَرَنْسِيٌّ', // Je suis français
  '1_28-SEQ-7_segment_4.mp3': 'سَكَنْتُ فِي بَارِيسَ', // j'ai habité à Paris
  'Sequence-2_segment_10.mp3': 'أَرُزٌّ', // Riz
  '1_2-SEQ-2-_segment_5.mp3': 'لِيزَا', // Lisa
  '1_16-SEQ-6_segment_17.mp3': 'شَمْسٌ',
  '1_16-SEQ-6_segment_19.mp3': 'خِطَابٌ', // discours, parole
  '1_16-SEQ-6_segment_12.mp3': 'لَحْمٌ', // viande
  'Sequence-7_segment_15.mp3': 'بَعِيدٌ عَنْ', // loin de
  'Sequence-8_segment_1.mp3': 'دَرْسٌ', // leçon
  '1_31-SEQ-8_segment_7.mp3': 'خَمْسَةٌ', // 5
  'Sequence-6_segment_9_6-12.mp3': 'مُتْعَبٌ', // fatigué
  '1_32-SEQ-9_segment_7.mp3': 'أَبَدًا', // jamais
  'Sequence-7_segment_8.mp3': 'جَيِّدٌ', // bien
  '1_18-SEQ-6_segment_4.mp3': 'مَا هُوَ؟', // qu'est-ce que ?
  '1_24-SEQ-7_segment_5.mp3': 'يَسْتَعْمِلُ', // utiliser
  '1_2-SEQ-2-_segment_4.mp3': 'طِفْلٌ', // enfant
  '1_12-SEQ-5_segment_2.mp3': 'قِطَارٌ', // train
  '1_12-SEQ-5_segment_5.mp3': 'طَلَبْتَ', // tu as demandé
  '1_2-SEQ-2-_segment_2.mp3': 'بَيْتٌ', // maison
  '1_35-SEQ-1_segment_5.mp3': 'عِشْتُ فِي بَارِيسَ', // j'ai vécu à Paris
  'Sequence-2_segment_7.mp3': 'وَزِيرٌ', // ministre
  '1_34-SEQ-1_segment_8.mp3': 'كَتَبَ', // il a écrit
  '1_26-SEQ-7_segment_4.mp3': 'أَبٌ', // père
  '1_24-SEQ-7_segment_3.mp3': 'اِجْتِمَاعٌ', // réunion
  'Sequence-6_segment_7.mp3': 'كِتَابٌ', // livre
  '1_34-SEQ-1_segment_4.mp3': 'كُتِبْتِ', // as écrit (tu)
  '1_37-SEQ-1_segment_4.mp3': 'يَعْمَلُ فِي', // travailler dans
  'Sequence-8_segment_9.mp3': 'وِزَارَةٌ', // ministère
  '1_7-SEQ-4-_segment_5.mp3': 'أَدْخَلَ', // faire entrer
  'Sequence-2_segment_8_2-5.mp3': 'جَلَبَابٌ', // robe
  'Sequence-2_segment_10_2-5.mp3': 'بَارِيسَ', // Paris
  'Sequence-6_segment_20_6-12.mp3': 'عِنْدِي', // j'ai
  '1_16-SEQ-6_segment_4.mp3': 'عُطْلَةٌ', // vacances
  'Sequence-6_segment_8_6-12.mp3': 'بِدَايَةٌ', // début
  'Sequence-6_segment_17.mp3': 'جَيِّدٌ', // bien
  '1_37-SEQ-1_segment_8.mp3': 'أَتَكَلَّمُ العَرَبِيَّةَ', // je parle arabe
  '1_32-SEQ-9_segment_2.mp3': 'شُكْرًا', // merci
  'Sequence-7_segment_7.mp3': 'الْآنَ', // maintenant
  'Sequence-6_segment_5.mp3': 'دَفْتَرٌ', // cahier
  'Sequence-2_segment_9.mp3': 'لَذِيذٌ', // délicieux
  '1_34-SEQ-1_segment_6.mp3': 'كُتِبْتِ', // as écrit (tu f.)
  '1_16-SEQ-6_segment_10.mp3': 'شَمَالٌ', // nord
  'Sequence-7_segment_17.mp3': 'وِزَارَةٌ', // ministère
  'Sequence-6_segment_1_6-12.mp3': 'أَفْهَمُ', // je comprends
  '1_37-SEQ-1_segment_10.mp3': 'نَأْكُلُ فِي مَطْعَمٍ', // nous mangeons dans un restaurant
  '1_5-SEQ-3-_segment_5.mp3': 'شَيْخٌ', // vieillard, cheikh
  'Sequence-6_segment_8.mp3': 'أَثْنَاءَ', // pendant
  'Sequence-2_segment_4.mp3': 'اِبْنِي', // mon fils
  '1_9-SEQ-4-_segment_9.mp3': 'يَطْبُخُ', // cuisiner
  'Sequence-7_segment_9.mp3': 'مِسْكِينِي', // mon pauvre
  '1_2-SEQ-2-_segment_6.mp3': 'يَزُورُ', // il visite
  'Sequence-8_segment_8.mp3': 'دَفْتَرُ الدَّرَجَاتِ', // carnet de notes
  '1_16-SEQ-6_segment_6.mp3': 'مُشْكِلَةٌ', // problème
  'Sequence-6_segment_10_6-12.mp3': 'لَا', // non
  'Sequence-7_segment_40.mp3': 'النَّاسُ', // les gens
  '1_9-SEQ-4-_segment_3.mp3': 'جَيِّدٌ', // bon
  '1_36-SEQ-1_segment_11.mp3': 'يَكْتُبُ', // il écrit
  '1_28-SEQ-7_segment_3.mp3': 'أَنَا فَرَنْسِيٌّ', // je suis français
  '1_28-SEQ-7_segment_4.mp3': 'سَكَنْتُ فِي بَارِيسَ', // j'ai habité à Paris
  'Sequence-2_segment_10.mp3': 'أَرُزٌّ', // riz
  '1_2-SEQ-2-_segment_5.mp3': 'لِيزَا', // Lisa
  '1_16-SEQ-6_segment_17.mp3': 'شَمْسٌ', // soleil
  'Sequence-8_segment_19.mp3': 'طَائِرَةٌ', // avion
  '1_3-SEQ-2-_segment_7.mp3': 'مَلَابِسُ', // vêtements
  '1_31-SEQ-8_segment_2.mp3': 'صِفْرٌ', // 0
  '1_16-SEQ-6_segment_11.mp3': 'جَامِعَةٌ', // université
  '1_16-SEQ-6_segment_7.mp3': 'قَمَرٌ', // lune
  'Sequence-6_segment_11.mp3': 'يَعْرِفُ', // il sait
  '1_28-SEQ-7_segment_7.mp3': 'وَأَنْتَ؟', // et toi ?
  'Sequence-5_segment_4.mp3': 'خَطِيبَةٌ', // fiancée
  'Sequence-5_segment_3.mp3': 'غَالٍ', // cher
  '1_18-SEQ-6_segment_8.mp3': 'هُنَاكَ', // là-bas
  'Sequence-2_segment_11_2-5.mp3': 'بَيْرُوتُ', // Beyrouth
  '1_18-SEQ-6_segment_15.mp3': 'وُجُوهٌ', // visages
  'Sequence-5_segment_8.mp3': 'صَبَّ', // verser
  '1_12-SEQ-5_segment_6.mp3': 'رِيفٌ', // campagne
  '1_36-SEQ-1_segment_4.mp3': 'أَنْتِ', // toi (fem)
  '1_20-SEQ-7_segment_5.mp3': 'أُسْبُوعٌ', // semaine
  'Sequence-7_segment_11.mp3': 'أَصْدِقَائِي', // mes amis
  'Sequence-6_segment_14.mp3': 'كَتَبْتُ', // j'ai écrit
  '1_5-SEQ-3-_segment_3.mp3': 'يَسَارٌ', // gauche
  '1_2-SEQ-2-_segment_7.mp3': 'وَادٍ', // vallée
  '1_3-SEQ-2-_segment_3.mp3': 'بَيْتٌ', // maison
  '1_36-SEQ-1_segment_9.mp3': 'يَكْتُبُ', // il écrit
  'Sequence-5_segment_13.mp3': 'بَيْضَةٌ', // œuf
  'Sequence-7_segment_12.mp3': 'مُمْتَازٌ', // excellent
  '1_10-SEQ-5_segment_2.mp3': 'جَرِيدَةٌ', // journal
  'Sequence-5_segment_7.mp3': 'وَسَطٌ', // milieu
  'Sequence-7_segment_35.mp3': 'حَزِينٌ', // triste
  'Sequence-6_segment_6.mp3': 'كَبِيرٌ', // grand
  '1_34-SEQ-1_segment_5.mp3': 'أَنْتِ', // toi (fem)
  '1_35-SEQ-1_segment_12.mp3': 'وَشَرِبْتُ قَهْوَةً', // et j'ai bu du café
  '1_16-SEQ-6_segment_15.mp3': 'يَتَكَلَّمُ', // parler
  '1_37-SEQ-1_segment_3.mp3': 'أَنَا فَرَنْسِيٌّ', // je suis français
  'Sequence-2_segment_7_2-5.mp3': 'بِئْرٌ', // puits
  '1_9-SEQ-4-_segment_4.mp3': 'حَظٌّ', // chance
  '1_16-SEQ-6_segment_16.mp3': 'يَوْمٌ', // jour
  '1_36-SEQ-1_segment_2.mp3': 'أَنَا', // je
  'Sequence-7_segment_31.mp3': 'تِجَارَةٌ', // (le) commerce
  '1_9-SEQ-4-_segment_6.mp3': 'طَبِيبٌ', // médecin
  '1_32-SEQ-9_segment_3.mp3': 'عَفْوًا', // de rien (pardon)
  '1_18-SEQ-6_segment_9.mp3': 'طَابِقٌ', // étage
  'Sequence-7_segment_36.mp3': 'سَمَكٌ', // poisson
  '1_26-SEQ-7_segment_2.mp3': 'آسِفٌ', // désolé
  '1_10-SEQ-5_segment_7.mp3': 'بِدَايَةٌ', // début
  'Sequence-6_segment_15_6-12.mp3': 'نَعَمْ', // oui
  'Sequence-6_segment_21.mp3': 'مُحَرِّكٌ', // moteur
  'Sequence-6_segment_5_6-12.mp3': 'لِمَاذَا', // pourquoi
  '1_7-SEQ-4-_segment_6.mp3': 'يُؤَدِّي الحَجَّ', // faire le pèlerinage
  'Sequence-6_segment_6_6-12.mp3': 'تَمْرِينٌ', // exercice
  '1_20-SEQ-7_segment_2.mp3': 'أَبٌ', // père
  '1_10-SEQ-5_segment_4.mp3': 'سَيَّارَةٌ', // voiture
  'Sequence-6_segment_18_6-12.mp3': 'جَلَسَ', // il s'est assis
  '1_32-SEQ-9_segment_5.mp3': 'بِالتَّأْكِيدِ', // bien sûr
  '1_34-SEQ-1_segment_3.mp3': 'أَنْتَ', // toi
  '1_16-SEQ-6_segment_14.mp3': 'مَعَ', // avec
  'Sequence-6_segment_2_6-12.mp3': 'كَلَامٌ', // la parole
  'Sequence-8_segment_3.mp3': 'عُطْلَةٌ', // vacances
  'Sequence-7_segment_13.mp3': 'المَطَارُ', // l'aéroport
  'Sequence-2_segment_12_2-5.mp3': 'مَكْتَبُ البَرِيدِ', // la poste
  'Sequence-7_segment_4.mp3': 'لَدَيْهِ', // il a
  'Sequence-6_segment_16_6-12.mp3': 'يَنْظُرُ', // regarde
  'Sequence-7_segment_32.mp3': 'جُبْنٌ', // fromage
  '1_18-SEQ-6_segment_18.mp3': 'قَارِبٌ', // bateau
  'Sequence-5_segment_16.mp3': 'سَيِّدَةٌ', // dame
  '1_32-SEQ-9_segment_8.mp3': 'كَثِيرًا', // beaucoup
  'Sequence-2_segment_2.mp3': 'أَيْدٍ', // mains
  '1_18-SEQ-6_segment_5.mp3': 'مَنْ؟', // qui ?
  'Sequence-2_segment_5_2-5.mp3': 'زُرْتُ', // j'ai visité
  'Sequence-5_segment_9.mp3': 'طَائِرٌ', // oiseau
  'Sequence-6_segment_7_6-12.mp3': 'نِهَايَةٌ', // fin
  'Sequence-7_segment_20.mp3': 'لُوكْسَمْبُورْغ', // Luxembourg
  '1_12-SEQ-5_segment_3.mp3': 'صَدِيقٌ', // ami
  '1_7-SEQ-4-_segment_7.mp3': 'أَعِدْ', // répéter
  'Sequence-8_segment_15.mp3': 'فُنْدُقٌ', // hôtel
  '1_14-SEQ-6_segment_2.mp3': 'كَيْفَ', // comment
  '1_2-SEQ-2-_segment_9.mp3': 'زَاي', // ZAI
  '1_31-SEQ-8_segment_4.mp3': 'اِثْنَانِ', // deux
  'Sequence-2_segment_1.mp3': 'يَدٌ', // main
  'Sequence-2_segment_6.mp3': 'غَرَامَةٌ', // amende
  '1_34-SEQ-1_segment_9.mp3': 'هِيَ' // elle
};



// Indique quelle source afficher (par défaut 'sequences')
let currentSequenceType = 'sequences';


const sequences = [
  {
    id: 0,
    titre: "Séquence 0",
    theme: "Quelques phrases",
    notion: "Premiers mots",
    exercices: [
      { id: 1, titre: "Présentation", file: "Presentation-ZOOM0021_MN-2.mp3" },
      { id: 2, titre: "Dialogue", file: "Dialogue.mp3" },
      { id: 3, titre: "Les premiers mots", file: "Les-premiers-mots-.mp3" }
    ]
  },
  {
    id: 2,
    titre: "Séquence 2",
    theme: "Les lettres non liées à gauche : و ز ر ذ د ا / Les consonnes : ب ت ث",
    notion: "L’écriture",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_2-SEQ-2-EXERCICE-1.mp3" },
      { id: 3, titre: "Exercice 3", file: "Sequence-2-exercice-3.m4a" },
      { id: 4, titre: "Exercice 4", file: "1_3-SEQ-2-EXERCICE-4.mp3" },
      { id: 5, titre: "Exercice 5", file: "Sequence-2-exercice-5.m4a" }
    ]
  },
  {
    id: 3,
    titre: "Séquence 3",
    theme: "Les consonnes : ش س خ ح ج",
    notion: "L’écriture",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_4-SEQ-3-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "1_5-SEQ-3-EXERCICE-2.mp3" },
      { id: 3, titre: "Exercice 3", file: "1_6-SEQ-3-EXERCICE-3.mp3" }
    ]
  },
  {
    id: 4,
    titre: "Séquence 4",
    theme: "Les consonnes emphatiques : ص ض ط ظ",
    notion: "Le Chadda",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_7-SEQ-4-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "Sequence-4-exercice-2.m4a" },
      { id: 3, titre: "Exercice 3", file: "1_8-SEQ-4-EXERCICE-3.mp3" },
      { id: 4, titre: "Exercice 4", file: "1_9-SEQ-4-EXERCICE-4.mp3" }
    ]
  },
  {
    id: 5,
    titre: "Séquence 5",
    theme: "Le Ta Marbuta / Les consonnes : ق ف غ ع",
    notion: "La marque du féminin / La conjugaison du passé au singulier",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_10-SEQ-5-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "Sequence-5-exercice-2.m4a" },
      { id: 5, titre: "Exercice 5", file: "1_12-SEQ-5-EXERCICE-5.mp3" },
      { id: 8, titre: "Exercice 8", file: "1_13-SEQ-5-EXERCICE-8.mp3" }
    ]
  },
  {
    id: 6,
    titre: "Séquence 6",
    theme: "Le Lamalif / Les consonnes : ك ل م ن هـ",
    notion: "L’écriture",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_14-SEQ-6-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "1_15-SEQ-6-EXERCICE-2.mp3" },
      { id: 3, titre: "Exercice 3", file: "Sequence-6-exercice-3.m4a" },
      { id: 6, titre: "Exercice 6", file: "1_16-SEQ-6-EXERCICE-6.mp3" },
      { id: 7, titre: "Exercice 7", file: "1_17-SEQ-6-EXERCICE-7.mp3" },
      { id: 8, titre: "Exercice 8", file: "1_18-SEQ-6-EXERCICE-8.mp3" },
      { id: 12, titre: "Exercice 12", file: "Sequence-6-exercice-12.m4a" },
      { id: 14, titre: "Exercice 14", file: "1_19-SEQ-6-EXERCICE-14.mp3" }
    ]
  },
  {
    id: 7,
    titre: "Séquence 7",
    theme: "Le Hamza, l’Alif Maqsoura et le Madda",
    notion: "Aspects phonétiques du Hamza, Alif Maqsoura et Madda",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_20-SEQ-7-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "1_21-SEQ-7-EXERCICE-2.mp3" },
      { id: 3, titre: "Exercice 3", file: "1_22-SEQ-7-EXERCICE-3.mp3" },
      { id: 4, titre: "Exercice 4", file: "1_23-SEQ-7-EXERCICE-4.mp3" },
      { id: 5, titre: "Exercice 5", file: "1_24-SEQ-7-EXERCICE-5.mp3" },
      { id: 6, titre: "Exercice 6", file: "1_25-SEQ-7-EXERCICE-6.mp3" },
      { id: 7, titre: "Exercice 7", file: "1_26-SEQ-7-EXERCICE-7.mp3" },
      { id: 8, titre: "Exercice 8", file: "1_27-SEQ-7-EXERCICE-8.mp3" },
      { id: 11, titre: "Exercice 11", file: "1_28-SEQ-7-EXERCICE-11.mp3" },
      { id: 12, titre: "Exercice 12", file: "Sequence-7-exercice-12.m4a" }
    ]
  },
  {
    id: 8,
    titre: "Séquence 8",
    theme: "Les lettres solaires et lunaires",
    notion: "Le déterminant « al » / Les chiffres de 0 à 10",
    exercices: [
      { id: 1, titre: "Solaire - Lunaire", file: "1_29-SEQ-8-AL-SOLAIRE-AL-LUNAIRE.mp3" },
      { id: 6, titre: "Exercice 6", file: "1_30-SEQ-8-EXERCICE-6.mp3" },
      { id: 7, titre: "Les chiffres", file: "1_31-SEQ-8_LES-CHIFFRES.mp3" },
      { id: 8, titre: "Exercice supplémentaire", file: "Sequence-8-exercice-1.m4a" }
    ]
  },
  {
    id: 9,
    titre: "Séquence 9",
    theme: "Le Tanwin",
    notion: "La détermination et l’indétermination des noms / Aspect phonétique du Tanwin",
    exercices: [
      { id: 1, titre: "Exercice 1", file: "1_32-SEQ-9-EXERCICE-1.mp3" },
      { id: 2, titre: "Exercice 2", file: "1_33-SEQ-9-EXERCICE-2.mp3" }
    ]
  },
  {
    id: 10,
    titre: "Séquence 10",
    theme: "La conjugaison du verbe",
    notion: "Les pronoms personnels au singulier / La conjugaison du présent et passé au singulier",
    exercices: [
      { id: 5, titre: "Ecoute 1", file: "1_34-SEQ-10-ECOUTE-1.mp3" },
      { id: 1, titre: "Exercice 1", file: "1_35-SEQ-10-EXERCICE-1.mp3" },
      { id: 3, titre: "Ecoute 2", file: "1_36-SEQ-10-ECOUTE-2.mp3" },
      { id: 2, titre: "Exercice 2", file: "1_37-SEQ-10-EXERCICE_2.mp3" },
      { id: 4, titre: "Exercice Facultatif (Page-65)", file: "Page-65.mp3" }
    ]
  }
];



// Nouveau tableau des leçons
const sequences_Lessons = [
  {
    id: 0,
    titre: "Leçon 1",
    theme: "Quelques phrases",
    notion: "Présentation",
    exercices: [
      { id: 1, titre: "Dialogue", file: "1_38-leçon_1-TEXTE.mp3" },
      { id: 2, titre: "Vocabulaire", file: "1_39-leçon_1-VOCABULAIRE.mp3" },
      { id: 3, titre: "Exercice 7", file: "1_40-leçon_1_3-exercice_7.mp3" }
    ]
  },
  {
    id: 1,
    titre: "Leçon 2",
    theme: "Dialogue 2",
    notion: "Présentation 3 personnes",
    exercices: [
      { id: 1, titre: "Dialogue", file: "1_41-leçon_2-TEXTE.mp3" },
      { id: 2, titre: "Vocabulaire", file: "1_42-leçon_2-VOCABULAIRE.mp3" },
      { id: 3, titre: "Exercice 5", file: "1_43-leçon_2-exercice-5.mp3" }
    ]
  },
  {
    id: 2,
    titre: "Leçon 3",
    theme: "Dialogue 3",
    notion: "2 personnes",
    exercices: [
      { id: 1, titre: "Dialogue", file: "1_44-leçon_3_1-TEXTE.mp3" },
      { id: 2, titre: "Vocabulaire", file: "1_45-leçon_3-VOCABULAIRE.mp3" },
      { id: 3, titre: "Conjugaison", file: "1_46-leçon_3-ECOUTE_1.mp3" },
      { id: 4, titre: "Exercice 10", file: "1_47-leçon_3-exercice-10.mp3" },
      { id: 5, titre: "page-112", file: "page-112.mp3" }
    ]
  }

];








// --- Mode d'affichage : 'cyclique' ou 'dual' ---
const modeAffichage = 'cyclique'; // ou 'dual'

// --- Paramètres cyclique (messages alternés avec direction propre) ---
const cycliqueParams = {
  fontFamily: 'Quicksand, sans-serif',
  fontSize: '11px',
  textColor: 'white',
  backgroundColor: 'black',
  scrollSpeed: 100,             // px/s
  // Chaque item définit texte et sens de défilement 'rtl' ou 'ltr'
  scrollItems: [
    { text: 'Soutien au peuple palestinien - Liberté, Justice et Paix.', direction: 'rtl' },
    { text: 'סוֹלִידָרִיוּת עִם הָעָם הַפָּלַסְטִינִי – חֵרוּת, צֶדֶק וְשָׁלוֹם לְכוּלָם. - تَضَامُنٌ مَعَ الشَّعْبِ الفِلَسْطِينِيِّ - حُرِّيَّةٌ، وَعَدَالَةٌ، وَسَلَامٌ لِلْجَمِيعِ.', direction: 'ltr' }
  ],
  delayBetween: 10               // s entre messages
};

// --- Paramètres dual (2 bandeaux indépendants) ---
const dualParams = [
  {
    fontFamily: 'Quicksand, sans-serif', fontSize: '11px', textColor: 'white', backgroundColor: 'black',
    scrollSpeed: 150, scrollText: 'Soutien au peuple palestinien - Liberté, Justice et Paix.', delai: 0,
    direction: 'rtl', bottomOffset: 0
  },
  {
    fontFamily: 'Quicksand, sans-serif', fontSize: '11px', textColor: 'white', backgroundColor: 'black',
    scrollSpeed: 150, scrollText: 'סוֹלִידָרִיוּת עִם הָעָם הַפָּלַסְטִינִי – חֵרוּת, צֶדֶק וְשָׁלוֹם לְכוּלָם. - تَضَامُنٌ مَعَ الشَّعْبِ الفِلَسْطِينِيِّ - حُرِّيَّةٌ، وَعَدَالَةٌ، وَسَلَامٌ لِلْجَمِيعِ.', delai: 0,
    direction: 'ltr', bottomOffset: 5
  }
];

/** Crée un bandeau défilant simple **/
function creerBandeau(idSuffix, params) {
  const bandeau = document.createElement('div');
  bandeau.className = 'bandeau';
  Object.assign(bandeau.style, {
    bottom: params.bottomOffset + 'px', backgroundColor: params.backgroundColor,
    fontFamily: params.fontFamily, fontSize: params.fontSize, color: params.textColor
  });
  const texte = document.createElement('span'); texte.className = 'texte-defilant'; texte.textContent = params.scrollText;
  bandeau.appendChild(texte); document.body.appendChild(bandeau);
  let pos = params.direction === 'rtl' ? window.innerWidth : -texte.offsetWidth;
  const sens = params.direction === 'rtl' ? -1 : 1;
  function defile() {
    pos += sens * params.scrollSpeed / 60;
    if (sens===-1 && pos < -texte.offsetWidth) pos = window.innerWidth;
    if (sens===1 && pos > window.innerWidth) pos = -texte.offsetWidth;
    texte.style.transform = `translateX(${pos}px)`;
    requestAnimationFrame(defile);
  }
  setTimeout(() => requestAnimationFrame(defile), params.delai*1000);
}

/** Lance un bandeau cyclique alternant messages et directions **/
function lancerCyclique(params) {
  const bandeau = document.createElement('div');
  bandeau.className = 'bandeau';
  Object.assign(bandeau.style, { bottom: '0px', backgroundColor: params.backgroundColor,
    fontFamily: params.fontFamily, fontSize: params.fontSize, color: params.textColor
  });
  const texte = document.createElement('span'); texte.className = 'texte-defilant'; bandeau.appendChild(texte); document.body.appendChild(bandeau);

  let index = 0;
  function afficherItem() {
    const item = params.scrollItems[index];
    texte.textContent = item.text;
    let pos = window.innerWidth * (item.direction==='rtl' ? 1 : -1) - (item.direction==='rtl' ? 0 : texte.offsetWidth * -1);
    const sens = item.direction==='rtl' ? -1 : 1;
    function defile() {
      pos += sens * params.scrollSpeed / 60;
      if ((sens===-1 && pos < -texte.offsetWidth) || (sens===1 && pos > window.innerWidth)) {
        index = (index + 1) % params.scrollItems.length;
        return setTimeout(afficherItem, params.delayBetween*1000);
      }
      texte.style.transform = `translateX(${pos}px)`;
      requestAnimationFrame(defile);
    }
    requestAnimationFrame(defile);
  }
  afficherItem();
}

// --- Exécution selon le mode ---
if (modeAffichage==='cyclique') lancerCyclique(cycliqueParams);
else dualParams.forEach((p,i)=>creerBandeau(i+1,p));




// --- Variables globales ---
let currentTimeout = null; // Pour la gestion du délai en mode Quiz

// Variables Mode Quiz
let quizPlaylist = []; // Liste de lecture aléatoire pour le Quiz (utilise 'tracks')
let quizCurrentIndex = -1;

// Variables Mode Leçon
let lessonPlaylist = []; // Liste de lecture basée sur la sélection (peut être ordonnée ou mélangée)
let lessonCurrentIndex = -1;
let isLessonPlaylistShuffled = false; // Indicateur si la playlist leçon est mélangée

const modal = document.getElementById('modal');
const modalImage = document.getElementById('modal-image');
const modalFilename = document.getElementById('modal-filename');



  let isPopupEnlarged = false;



let isAutoPlaying = false;
let autoPlayTimeout = null;

function startAutoPlay() {
    isAutoPlaying = true;
    playNextAuto();
}

function stopAutoPlay() {
    isAutoPlaying = false;
    if (autoPlayTimeout) clearTimeout(autoPlayTimeout);
    const player = document.getElementById('player');
    player.onended = null;
}

function playNextAuto() {
    const player = document.getElementById('player');
    const delayInput = document.querySelector('input[name=delay]:checked');
    const delay = delayInput ? parseInt(delayInput.value, 10) : 0;

    playNext();

    player.onended = () => {
        if (isAutoPlaying) {
            autoPlayTimeout = setTimeout(() => {
                playNextAuto();
            }, delay + 500); // Petit tampon
        }
    };
}




// --- Utilitaires ---
function isDebugMode() {
    const params = new URLSearchParams(window.location.search);
    return params.has('debug');
}

// Mélange un tableau (Fisher-Yates) - Renvoie une NOUVELLE copie mélangée
/*function shuffleArray(array) {
    let shuffled = [...array]; // Crée une copie
    let currentIndex = shuffled.length, randomIndex;
    while (currentIndex !== 0) {
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex--;
        [shuffled[currentIndex], shuffled[randomIndex]] = [
            shuffled[randomIndex], shuffled[currentIndex]];
    }
    return shuffled;
}*/

const shuffleArray = (function () {
    const stateMap = new WeakMap();

    return function (array) {
        if (!Array.isArray(array)) throw new Error("shuffleArray() attend un tableau");

        let state = stateMap.get(array);

        if (!state || state.remaining.length === 0) {
            // Démarre un nouveau cycle
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            state = { remaining: shuffled.slice() };
            stateMap.set(array, state);
        }

        // Consomme tous les éléments restants dans l'ordre actuel
        const output = [...state.remaining];
        state.remaining = []; // Vide pour déclencher un nouveau cycle au prochain appel

        return output;
    };
})();


function createShuffledLessonPlaylistFromSelection() {
    const checkboxes = document.querySelectorAll('#lessons-container input[type=checkbox][id*="-ex-"]:checked:not([disabled])');
    let tempPlaylist = [];

    checkboxes.forEach(checkbox => {
        const trackFile = getTrackFileFromCheckboxId(checkbox.id);
        if (trackFile && trackSeq.hasOwnProperty(trackFile)) {
            tempPlaylist.push(trackFile);
        }
    });

    if (tempPlaylist.length === 0) {
        return []; // Aucun morceau sélectionné
    }

    // --- Mélange façon Fisher-Yates directement ici ---
    for (let i = tempPlaylist.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [tempPlaylist[i], tempPlaylist[j]] = [tempPlaylist[j], tempPlaylist[i]];
    }

    return tempPlaylist;
}





// Trouve le nom de fichier associé à l'ID d'une checkbox d'exercice
function getTrackFileFromCheckboxId(checkboxId) {
    const parts = checkboxId.split('-');
    if (parts.length < 4) return null;

    const type = parts[0]; // 'sequence' ou 'lesson'
    if (type !== 'sequence' && type !== 'lesson') return null; // 🆕 Vérification

    const sequenceId = parseInt(parts[1], 10);
    const exerciseId = parseInt(parts[3], 10);

    const activeSequences = (type === 'sequence') ? sequences : sequences_Lessons;

    const sequence = activeSequences.find(s => s.id === sequenceId);
    if (!sequence) return null;
    const exercise = sequence.exercices.find(ex => ex.id === exerciseId);
    if (!exercise) return null;

    return exercise.file;
}

// --- Gestion des Playlists ---

/**
 * Mode Quiz: Génère une NOUVELLE playlist aléatoire à partir de l'objet `tracks`.
 * Appelée à l'initialisation et à chaque entrée en mode Quiz.
 */
function generateQuizPlaylist() {
    const availableQuizTracks = Object.keys(tracks);
    if (availableQuizTracks.length === 0) {
        console.warn("Mode Quiz: Aucune piste définie dans l'objet 'tracks'.");
        quizPlaylist = [];
    } else {
        quizPlaylist = shuffleArray(availableQuizTracks); // Mélange toutes les pistes quiz
    }
    quizCurrentIndex = -1; // Prêt à démarrer avec Suivant
    console.log("Mode Quiz: Nouvelle playlist générée:", quizPlaylist);
}

/**
 * Crée et renvoie une playlist ORDONNÉE basée sur les checkboxes cochées
 * et la disponibilité dans `trackSeq`.
 * @returns {string[]} La liste ordonnée des noms de fichiers.
 */
function createOrderedLessonPlaylistFromSelection() {
    const checkboxes = document.querySelectorAll('#lessons-container input[type=checkbox][id*="-ex-"]:checked:not([disabled])');
    let tempPlaylist = [];

    const activeSequences = (currentSequenceType === 'sequences') ? sequences : sequences_Lessons;

    checkboxes.forEach(checkbox => {
        const trackFile = getTrackFileFromCheckboxId(checkbox.id);
        if (trackFile && trackSeq.hasOwnProperty(trackFile)) {
            // Retrouver où est le fichier dans activeSequences
            const seqIndex = activeSequences.findIndex(seq => seq.exercices.some(ex => ex.file === trackFile));
            const exIndex = seqIndex !== -1 ? activeSequences[seqIndex].exercices.findIndex(ex => ex.file === trackFile) : -1;

            if (seqIndex !== -1 && exIndex !== -1) {
                tempPlaylist.push({ file: trackFile, seq: seqIndex, ex: exIndex });
            }
        }
    });

    // Trier d'abord par séquence puis par exercice
    tempPlaylist.sort((a, b) => {
        if (a.seq !== b.seq) return a.seq - b.seq;
        return a.ex - b.ex;
    });

    return tempPlaylist.map(item => item.file);
}

/**
 * Mode Leçon: Met à jour la `lessonPlaylist` pour qu'elle corresponde à la sélection ORDONNÉE.
 * Appelée lors d'un changement de checkbox, ou via le bouton "Réinitialiser Ordre".
 */
function updateLessonPlaylistOrdered() {
    lessonPlaylist = createOrderedLessonPlaylistFromSelection();
    isLessonPlaylistShuffled = false; // Marquer comme ordonnée
    // Ne pas réinitialiser l'index ici pour ne pas perturber la lecture en cours
    console.log("Mode Leçon: Playlist mise à jour (ORDONNÉE):", lessonPlaylist);
    // Ajuster l'index si l'élément courant a été retiré
    if (lessonCurrentIndex >= lessonPlaylist.length) {
        lessonCurrentIndex = lessonPlaylist.length > 0 ? lessonPlaylist.length - 1 : -1;
    }
}

// --- Contrôles du Lecteur ---

/**
 * Fonction principale pour jouer une piste audio.
 * Gère les différences entre le mode Leçon et le mode Quiz.
 * @param {string} trackKey - Le nom du fichier (clé dans trackSeq ou tracks).
 */
function playTrackWithCurrentSettings(trackKey) {
    const player = document.getElementById('player');
    const translationDiv = document.getElementById('translation');
    const debugInfoDiv = document.getElementById('debug-info');
    const debugMode = isDebugMode();

    player.pause();
    if (currentTimeout) clearTimeout(currentTimeout);
    translationDiv.textContent = '';
    translationDiv.className = '';

    const lessonTree = document.getElementById('lesson-tree');
    const lessonModeActive = lessonTree && lessonTree.style.display === 'block';

    let audioSource;

    if (lessonModeActive) {
        // === MODE LEÇON ===
        if (!trackSeq.hasOwnProperty(trackKey)) {
            console.error(`Mode Leçon: Audio manquant pour ${trackKey} dans trackSeq.`);
            if (debugMode) debugInfoDiv.textContent = `Erreur Leçon: ${trackKey} absent de trackSeq.`;
            return;
        }
        audioSource = trackSeq[trackKey];
        console.log(`Mode Leçon: Lecture de ${trackKey}`);
        if (debugMode) debugInfoDiv.textContent = `Leçon - Fichier : ${trackKey}`;

        player.src = audioSource;
        player.play().catch(error => {
            console.error(`Erreur lecture Leçon (${trackKey}):`, error);
            if (debugMode) debugInfoDiv.textContent = `Erreur lecture Leçon: ${trackKey}`;
        });

    } else {
        // === MODE QUIZ ===
        if (!tracks.hasOwnProperty(trackKey)) {
            console.error(`Mode Quiz: Audio manquant pour ${trackKey} dans tracks.`);
            if (debugMode) debugInfoDiv.textContent = `Erreur Quiz: ${trackKey} absent de tracks.`;
            return;
        }
        audioSource = tracks[trackKey];
        console.log(`Mode Quiz: Lecture de ${trackKey}`);

        const delayInput = document.querySelector('input[name=delay]:checked');
        const orderInput = document.querySelector('input[name=order]:checked');
        const languageInput = document.querySelector('input[name=language]:checked');
        const delay = delayInput ? parseInt(delayInput.value, 10) : 0;
        const order = orderInput ? orderInput.value : 'sound-first';
        const language = languageInput ? languageInput.value : 'fr';

      
        let trad = '', prefix = '';
        if (language === 'fr') {
            trad = translations[trackKey] || 'Trad. Quiz (fr) ?';
          //  prefix = 'Mot : ';
            translationDiv.style.fontSize = '';
        } else { // 'ar'
            trad = translations_ar[trackKey] || 'Trad. Quiz (ar) ?';
          //   prefix = 'الكلمة : ';
            translationDiv.classList.add('text-rtl');
            translationDiv.style.fontSize = '30px';
        }
        if (debugMode) debugInfoDiv.textContent = `Quiz - Fichier : ${trackKey}`;

        if (order === 'sound-first') {
            player.src = audioSource;
            player.play().then(() => {
                currentTimeout = setTimeout(() => {
                    translationDiv.textContent = `${prefix}${trad}`;
                }, delay);
            }).catch(error => console.error(`Erreur lecture Quiz (${trackKey}):`, error));
        } else { // 'word-first'
            translationDiv.textContent = `${prefix}${trad}`;
            currentTimeout = setTimeout(() => {
                player.src = audioSource;
                player.play().catch(error => console.error(`Erreur lecture Quiz (${trackKey}) après délai:`, error));
            }, delay);
        }
    }
}

// --- Fonctions des Boutons de Contrôle ---

/**
 * Bouton SUIVANT: Joue la piste suivante dans la playlist du mode actif.
 */
function playNext() {
    const lessonTree = document.getElementById('lesson-tree');
    const lessonModeActive = lessonTree && lessonTree.style.display === 'block';

    if (lessonModeActive) {
        // === MODE LEÇON ===
        if (lessonPlaylist.length === 0) {
            alert("Mode Leçon: Aucune piste sélectionnée. Veuillez cocher des exercices.");
            return;
        }
        if (lessonCurrentIndex < lessonPlaylist.length - 1) {
            lessonCurrentIndex++;
            playTrackWithCurrentSettings(lessonPlaylist[lessonCurrentIndex]);
        } else {
            alert(`Mode Leçon: Fin de la liste ${isLessonPlaylistShuffled ? 'mélangée' : 'ordonnée'} !`);
            // Reste sur le dernier
        }
    } else {
        // === MODE QUIZ ===
        // Si l'index est -1 (début ou après reset), et la playlist existe, on commence à 0
        if (quizCurrentIndex === -1 && quizPlaylist.length > 0) {
             quizCurrentIndex = 0;
             playTrackWithCurrentSettings(quizPlaylist[quizCurrentIndex]);
        } else if (quizCurrentIndex < quizPlaylist.length - 1) {
             quizCurrentIndex++; // Avancer normalement
             playTrackWithCurrentSettings(quizPlaylist[quizCurrentIndex]);
        } else if (quizPlaylist.length > 0) {
             // On est au dernier élément
             alert("Mode Quiz: Fin de la liste aléatoire ! Générez un nouveau mix ou revenez en arrière.");
             // On reste sur le dernier.
        } else {
             // Playlist vide (ne devrait pas arriver avec la nouvelle logique, mais sécurité)
             alert("Mode Quiz: Playlist vide. Cliquez sur 'Nouveau Mot Aléatoire'.");
        }
    }
}

/**
 * Bouton PRÉCÉDENT: Joue la piste précédente dans la playlist du mode actif.
 */
function playPrevious() {
    const lessonTree = document.getElementById('lesson-tree');
    const lessonModeActive = lessonTree && lessonTree.style.display === 'block';

    if (lessonModeActive) {
        // === MODE LEÇON ===
         if (lessonPlaylist.length === 0) {
            alert("Mode Leçon: Aucune piste sélectionnée.");
            return;
        }
        if (lessonCurrentIndex > 0) {
            lessonCurrentIndex--;
            playTrackWithCurrentSettings(lessonPlaylist[lessonCurrentIndex]);
        } else {
            alert("Mode Leçon: Début de la liste !");
            // Reste au début
            if (lessonPlaylist.length > 0) lessonCurrentIndex = 0;
        }
    } else {
        // === MODE QUIZ ===
        if (quizPlaylist.length === 0) {
             alert("Mode Quiz: Playlist vide.");
             return;
        }
        if (quizCurrentIndex > 0) {
            quizCurrentIndex--;
            playTrackWithCurrentSettings(quizPlaylist[quizCurrentIndex]);
        } else {
            alert("Mode Quiz: Début de la liste aléatoire !");
            // Reste au début
            if (quizPlaylist.length > 0) quizCurrentIndex = 0;
        }
    }
}

/**
 * Bouton RÉPÉTER: Rejoue la piste actuellement pointée par l'index du mode actif.
 */
function repeatTrack() {
     stopAutoPlay();
    const lessonTree = document.getElementById('lesson-tree');
    const lessonModeActive = lessonTree && lessonTree.style.display === 'block';
    let trackToRepeat = null;
    let currentIndex = -1;
    let currentPlaylist = [];

    if (lessonModeActive) {
        currentIndex = lessonCurrentIndex;
        currentPlaylist = lessonPlaylist;
    } else {
        currentIndex = quizCurrentIndex;
        currentPlaylist = quizPlaylist;
    }

    if (currentIndex >= 0 && currentIndex < currentPlaylist.length) {
        trackToRepeat = currentPlaylist[currentIndex];
        console.log(`Mode ${lessonModeActive ? 'Leçon' : 'Quiz'}: Répétition de ${trackToRepeat}`);
        playTrackWithCurrentSettings(trackToRepeat);
    } else {
        alert(`Mode ${lessonModeActive ? 'Leçon' : 'Quiz'}: Rien à répéter. Utilisez 'Suivant'.`);
    }
}

/**
 * Bouton NOUVEAU MOT ALÉATOIRE (id="random-button"):
 * - Mode Quiz: Génère une NOUVELLE playlist aléatoire globale et joue le 1er élément.
 * - Mode Leçon: MÉLANGE la sélection ACTUELLE et joue le 1er élément de la liste mélangée.
 */
function handleRandomButton() {

  stopAutoPlay();
    const lessonTree = document.getElementById('lesson-tree');
    const lessonModeActive = lessonTree && lessonTree.style.display === 'block';

    if (lessonModeActive) {
        // === MODE LEÇON: Mélanger la sélection actuelle ===
      //  let orderedPlaylist = createOrderedLessonPlaylistFromSelection(); // Récupère la sélection fraîche
        let shuffledPlaylist = createShuffledLessonPlaylistFromSelection(); // <<<<<< Utilise directement la fonction
        if (shuffledPlaylist.length > 0) {
           // lessonPlaylist = shuffleArray(orderedPlaylist); // Écrase la playlist avec la version mélangée
            lessonPlaylist = shuffledPlaylist; // Stocke la playlist mélangée
            isLessonPlaylistShuffled = true; // Marquer comme mélangée
            lessonCurrentIndex = 0; // Commence au début de la liste mélangée
            console.log("Mode Leçon: Sélection mélangée:", lessonPlaylist);
            playTrackWithCurrentSettings(lessonPlaylist[lessonCurrentIndex]);
        } else {
            alert("Mode Leçon: Aucune piste sélectionnée à mélanger. Veuillez cocher des exercices.");
        }
    } else {
        // === MODE QUIZ: Générer un nouveau mix global ===
        console.log("Mode Quiz: Génération d'un nouveau mix.");
        generateQuizPlaylist(); // Crée une NOUVELLE liste aléatoire
        if (quizPlaylist.length > 0) {
             quizCurrentIndex = 0; // Commence au début du nouveau mix
             playTrackWithCurrentSettings(quizPlaylist[quizCurrentIndex]);
        } else {
             alert("Mode Quiz: Aucune piste disponible pour générer un mix.");
        }
    }
}

/**
 * Bouton RÉINITIALISER ORDRE (id="order-lesson-button"):
 * - Mode Leçon UNIQUEMENT: Restaure l'ordre séquentiel de la sélection actuelle.
 */
function handleOrderLessonButton() {

  stopAutoPlay();
     const lessonTree = document.getElementById('lesson-tree');
     const lessonModeActive = lessonTree && lessonTree.style.display === 'block';

     if (lessonModeActive) {
        console.log("Mode Leçon: Réinitialisation de l'ordre de la sélection.");
        updateLessonPlaylistOrdered(); // Met à jour et marque comme ordonnée
        // Optionnel: Ramener au début ou alerter ?
        lessonCurrentIndex = -1; // Réinitialise l'index, l'utilisateur devra cliquer sur Suivant.
        alert("Mode Leçon: L'ordre des pistes sélectionnées a été réinitialisé. Cliquez sur 'Suivant' pour commencer.");
     } else {
         // Ne fait rien si on n'est pas en mode Leçon
         console.log("Le bouton 'Réinitialiser Ordre' n'est actif qu'en mode Leçon.");
     }
}


// --- Gestion des Modes (Changement Quiz / Leçon) ---

/**
 * Active le Mode Leçon: Affiche l'arbre, EFFACE la sélection précédente,
 * met à jour la playlist leçon (vide), réinitialise Quiz et état shuffle.
 */
function toggleLessonMode() {
  stopAutoPlay();
    const lessonTree = document.getElementById('lesson-tree');
    const playerContainer = document.getElementById('player-container');
    const quizModeButton = document.getElementById('quiz-mode');
    const lessonModeButton = document.getElementById('lesson-mode');
    const contentWrapper = document.getElementById('content-wrapper');
    const lessonContainer = document.getElementById('lessons-container');

    if (lessonTree && lessonTree.style.display === 'block') return; // Déjà en mode Leçon

    console.log("Activation Mode Leçon");

    document.getElementById("order-lesson-button").style.display = "inline"; // ou "block"


    // 1. Affichage et Layout
    if (lessonTree) lessonTree.style.display = 'block';
    if (contentWrapper) contentWrapper.style.justifyContent = '';
    if (playerContainer) {
        playerContainer.style.flexGrow = '';
        playerContainer.style.margin = '';
    }
    if (lessonModeButton) lessonModeButton.style.backgroundColor = '#A00F24';
    if (quizModeButton) quizModeButton.style.backgroundColor = '';

    // 2. Réinitialiser état Quiz
    quizPlaylist = [];
    quizCurrentIndex = -1;
    console.log("État Quiz réinitialisé.");

    // 3. Effacer sélection Leçon précédente
    if (lessonContainer) {
        lessonContainer.querySelectorAll('input[type=checkbox]').forEach(cb => {
            cb.checked = false;
            cb.indeterminate = false;
        });
        console.log("Mode Leçon: Sélection précédente effacée.");
    }

    // 4. Mettre à jour playlist Leçon (vide) et réinitialiser index et état shuffle
    updateLessonPlaylistOrdered(); // Crée la liste vide et met isLessonPlaylistShuffled à false
    lessonCurrentIndex = -1;
}

/**
 * Active le Mode Quiz: Masque l'arbre, centre lecteur, réinitialise Leçon,
 * et génère une NOUVELLE playlist Quiz prête à l'emploi.
 */
function toggleQuizMode() {
 stopAutoPlay();
    const lessonTree = document.getElementById('lesson-tree');
    const playerContainer = document.getElementById('player-container');
    const lessonModeButton = document.getElementById('lesson-mode');
    const quizModeButton = document.getElementById('quiz-mode');
    const contentWrapper = document.getElementById('content-wrapper');


    document.getElementById("order-lesson-button").style.display = "none";

    // Si déjà en mode Quiz, on peut choisir de regénérer ou non. Ici, on regénère.
    // if (lessonTree && lessonTree.style.display === 'none') return; // Ancien comportement

    console.log("Activation Mode Quiz");

    // 1. Affichage et Layout
    if (lessonTree && lessonTree.style.display !== 'none') lessonTree.style.display = 'none';
    if (contentWrapper) contentWrapper.style.justifyContent = 'center';
    if (playerContainer) {
        playerContainer.style.flexGrow = '0';
        playerContainer.style.margin = 'auto';
    }
    if (quizModeButton) quizModeButton.style.backgroundColor = '#A00F24';
    if (lessonModeButton) lessonModeButton.style.backgroundColor = '';

    // 2. Réinitialiser état Leçon
    lessonPlaylist = [];
    lessonCurrentIndex = -1;
    isLessonPlaylistShuffled = false;
    console.log("État Leçon réinitialisé.");

    // 3. ***NOUVEAU***: Générer une nouvelle playlist Quiz immédiatement
    generateQuizPlaylist();
    // quizCurrentIndex est déjà réinitialisé à -1 par generateQuizPlaylist
}

// --- Interface Utilisateur Arborescence Leçons ---


/*function collapseAllTreeNodes() {
    document.querySelectorAll('#lessons-container details').forEach(d => d.open = false);
    document.getElementById('collapse-all-btn')?.classList.add('active');
    document.getElementById('collapse-all-btn')?.classList.remove('inactive');
    document.getElementById('expand-all-btn')?.classList.add('inactive');
    document.getElementById('expand-all-btn')?.classList.remove('active');
    console.log("Fonction collapseAllTreeNodes appelée");   
    // --- Logique MAJ pour gérer les classes des boutons ---
    const collapseBtn = document.querySelector('.tree-control-btn-collapse');
    const expandBtn = document.querySelector('.tree-control-btn-expand');
    if (collapseBtn.classList.contains('Minusactive')) {
        console.log("Collapse est déjà actif. Aucune action.");
        return; // Arrête l'exécution de la fonction ici
    }
    if (collapseBtn && expandBtn) {
        // Le bouton Collapse (celui cliqué) devient actif
        collapseBtn.classList.remove('Minusinactive');
        collapseBtn.classList.add('Minusactive'); // Sera rouge selon votre CSS
        // L'autre bouton (Expand) devient inactif
        expandBtn.classList.remove('Plusactive');
        expandBtn.classList.add('Plusinactive'); // Sera rouge selon votre CSS
    } else {
        console.error("Impossible de trouver les boutons de contrôle de l'arbre.");
    }
}

function expandAllTreeNodes() {
    document.querySelectorAll('#lessons-container details').forEach(d => d.open = true);
    document.getElementById('expand-all-btn')?.classList.add('active');
    document.getElementById('expand-all-btn')?.classList.remove('inactive');
    document.getElementById('collapse-all-btn')?.classList.add('inactive');
    document.getElementById('collapse-all-btn')?.classList.remove('active');
 console.log("Fonction expandAllTreeNodes appelée");
    // --- Logique MAJ pour gérer les classes des boutons ---
    const collapseBtn = document.querySelector('.tree-control-btn-collapse');
    const expandBtn = document.querySelector('.tree-control-btn-expand');
     // Vérifier si le bouton Expand est déjà l'actif. Si oui, ne rien faire.
    if (expandBtn.classList.contains('Plusactive')) {
        console.log("Expand est déjà actif. Aucune action.");
        return; // Arrête l'exécution de la fonction ici
    }
    if (collapseBtn && expandBtn) {
        // Le bouton Expand (celui cliqué) devient actif
        expandBtn.classList.remove('PLusinactive');
        expandBtn.classList.add('Plusactive'); // Sera vert selon votre CSS
        // L'autre bouton (Collapse) devient inactif
        collapseBtn.classList.remove('Minusactive');
        collapseBtn.classList.add('Minusinactive'); // Sera vert selon votre CSS
    } else {
        console.error("Impossible de trouver les boutons de contrôle de l'arbre.");
    }
}*/


function collapseAllTreeNodes() {


    // --- Logique MAJ pour gérer les classes des boutons ---
    const collapseBtn = document.querySelector('.tree-control-btn-collapse');
    const expandBtn = document.querySelector('.tree-control-btn-expand');


 // Si collapse est déjà actif, rien faire
    if (collapseBtn.classList.contains('Minusactive')) {
        console.log("Collapse est déjà actif. Aucune action.");
        return;
    }


    document.querySelectorAll('#lessons-container details').forEach(d => d.open = false);
    document.getElementById('collapse-all-btn')?.classList.add('active');
    document.getElementById('collapse-all-btn')?.classList.remove('inactive');
    document.getElementById('expand-all-btn')?.classList.add('inactive');
    document.getElementById('expand-all-btn')?.classList.remove('active');

    console.log("Fonction collapseAllTreeNodes appelée");



    if (!collapseBtn || !expandBtn) {
        console.error("Impossible de trouver les boutons de contrôle de l'arbre.");
        return;
    }

    // Mettre Collapse actif (rouge) et Expand inactif (vert)
    collapseBtn.classList.remove('Minusinactive');
    expandBtn.classList.remove('Plusactive');
    collapseBtn.classList.add('Minusactive');
    expandBtn.classList.add('Plusinactive');
   
}

function expandAllTreeNodes() {


  // --- Logique MAJ pour gérer les classes des boutons ---
    const collapseBtn = document.querySelector('.tree-control-btn-collapse');
    const expandBtn = document.querySelector('.tree-control-btn-expand');

 // Si expand est déjà actif, rien faire
    if (expandBtn.classList.contains('Plusactive')) {
        console.log("Expand est déjà actif. Aucune action.");
        return;
    }
    


    document.querySelectorAll('#lessons-container details').forEach(d => d.open = true);
    document.getElementById('expand-all-btn')?.classList.add('active');
    document.getElementById('expand-all-btn')?.classList.remove('inactive');
    document.getElementById('collapse-all-btn')?.classList.add('inactive');
    document.getElementById('collapse-all-btn')?.classList.remove('active');

    console.log("Fonction expandAllTreeNodes appelée");



    if (!collapseBtn || !expandBtn) {
        console.error("Impossible de trouver les boutons de contrôle de l'arbre.");
        return;
    }

    // Mettre Expand actif (vert) et Collapse inactif (vert)
    
    expandBtn.classList.remove('Plusinactive');
    expandBtn.classList.add('Plusactive');
    collapseBtn.classList.remove('Minusactive');
    collapseBtn.classList.add('Minusinactive');
    
}





   
        function updateModalContent(file) {
            
             if (!tableauBase64.hasOwnProperty(file)) {
                 console.error("Image non trouvée dans tableauBase64 pour:", file);
                 modalImage.style.display = 'none';
                 modalFilename.textContent = `Erreur: ${file} introuvable`;
                 return false;
             }

            let base64 = tableauBase64[file];
            const prefix = "data:image/png;base64,";
          

            if (typeof base64 === 'string' && !base64.startsWith('data:image')) {
                base64 = prefix + base64;
            } else if (typeof base64 !== 'string' || base64.length < 50) { // Vérif simple de validité
                 console.error("Donnée base64 invalide ou manquante pour:", file);
                 modalImage.style.display = 'none';
                 modalFilename.textContent = `${file} (Donnée invalide)`;
                 return false;
            }

            console.log("pop-up");

            modalImage.src = base64;
            modalImage.style.display = 'block';
            modalFilename.textContent = file;
            return true;
        }



// Fonction pour agrandir/réduire la popup avec la touche Z
function handleKeyPress(event) {
  // Vérifier si la popup est visible
  if ( modalImage.style.display === 'block') {
    console.log("pop-up");
    // Vérifier si la touche Z est pressée
    if (event.key === 'z' || event.key === 'Z') {
      if (!isPopupEnlarged) {
         console.log("touche Z");
        // Agrandir la popup
       modalImage.style.maxWidth = '600px';
       modalImage.style.maxHeight = '600px';
        isPopupEnlarged = true;
      } else {
        // Remettre à la taille normale
        resetPopupSize();
      }
    }
  }
}

// Fonction pour réinitialiser la taille de la popup
function resetPopupSize() {
  modalImage.style.maxWidth = '300px';
  modalImage.style.maxHeight = '300px';
  isPopupEnlarged = false;
}

function switchSequenceType(type) {
    currentSequenceType = type;
    renderSequences();
    console.log("Type d'arborescence changé:", currentSequenceType);

    const tabSeq = document.getElementById('tab-sequences');
    const tabLessons = document.getElementById('tab-lessons');

    if (type === 'sequences') {
        tabSeq.classList.add('active');
        tabSeq.classList.remove('inactive');
        tabLessons.classList.add('inactive');
        tabLessons.classList.remove('active');
    } else {
        tabLessons.classList.add('active');
        tabLessons.classList.remove('inactive');
        tabSeq.classList.add('inactive');
        tabSeq.classList.remove('active');
    }
}


/**
 * Construit l'arborescence HTML. Désactive checkboxes si audio manquant.
 * Ajoute listeners pour synchro visuelle Séquence<->Exercices.
 */
function renderSequences() {
    const container = document.getElementById('lessons-container');
    if (!container) {
        console.error("Conteneur #lessons-container introuvable !");
        return;
    }
    container.innerHTML = '';

    const activeSequences = (currentSequenceType === 'sequences') ? sequences : sequences_Lessons;
    const prefix = (currentSequenceType === 'sequences') ? 'sequence' : 'lesson';

    activeSequences.forEach(sequence => {
        const details = document.createElement('details');
        details.open = false;
        const summary = document.createElement('summary');
        const sequenceCheckbox = document.createElement('input');
        sequenceCheckbox.type = 'checkbox';
        sequenceCheckbox.id = `${prefix}-${sequence.id}`;
        sequenceCheckbox.dataset.sequenceId = sequence.id;
        summary.appendChild(sequenceCheckbox);

        const label = document.createElement('label');
        label.htmlFor = sequenceCheckbox.id;
        label.innerHTML = ` <strong>${sequence.titre}</strong> – ${sequence.theme || ''}<br><em>${sequence.notion || ''}</em>`;
        summary.appendChild(label);
        details.appendChild(summary);

        const ul = document.createElement('ul');
        let hasAvailableExercises = false;

        sequence.exercices.forEach(ex => {
            const li = document.createElement('li');
            const exCheckbox = document.createElement('input');
            exCheckbox.type = 'checkbox';
            exCheckbox.classList.add(`ex-of-${prefix}-${sequence.id}`);
            exCheckbox.id = `${prefix}-${sequence.id}-ex-${ex.id}`;
            exCheckbox.dataset.exerciseId = ex.id;
            exCheckbox.dataset.file = ex.file;

            const exLabel = document.createElement('label');
            exLabel.htmlFor = exCheckbox.id;
            exLabel.innerHTML = ` <strong>${ex.titre}</strong>`;

            if (!trackSeq.hasOwnProperty(ex.file)) {
                exCheckbox.disabled = true;
                li.style.color = 'grey';
                exLabel.innerHTML += ' <small>(Audio manquant)</small>';
            } else {
                hasAvailableExercises = true;

                if (tableauBase64.hasOwnProperty(ex.file)) {
                    // --- Détection mobile ou pas ---
                    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

                    if (isTouchDevice) {
                        // 📱 Version mobile : toggle sur clic
                        exLabel.addEventListener('click', function (e) {
                            e.preventDefault(); // Evite comportement label par défaut
                            if (exCheckbox.checked && !exCheckbox.disabled) {
                                const modal = document.getElementById('modal');
                                if (modal.style.display === 'block') {
                                    modal.style.display = 'none';
                                } else {
                                    if (updateModalContent(ex.file)) {
                                        adaptModalForMobile();
                                        modal.style.display = 'block';
                                    }
                                }
                            }
                        });
                    } else {
                        // 🖥️ Version desktop : hover classique
                        exLabel.addEventListener('mouseover', function () {
                            if (exCheckbox.checked && !exCheckbox.disabled) {
                                if (updateModalContent(ex.file)) {
                                    document.getElementById('modal').style.display = 'block';
                                }
                            }
                        });
                        exLabel.addEventListener('mouseout', function () {
                            document.getElementById('modal').style.display = 'none';
                        });
                    }

                    exCheckbox.addEventListener('change', function () {
                        if (!exCheckbox.checked) {
                            document.getElementById('modal').style.display = 'none';
                        }
                    });
                } else {
                    exLabel.innerHTML += ' <small>(Image manquante)</small>';
                    li.style.opacity = 0.6;
                }
            }

            li.appendChild(exCheckbox);
            li.appendChild(exLabel);
            ul.appendChild(li);
        });

        if (ul.children.length > 0) {
            details.appendChild(ul);

            ul.addEventListener('change', (event) => {
                if (event.target.type === 'checkbox' && event.target.matches(`.ex-of-${prefix}-${sequence.id}:not([disabled])`)) {
                    const allExCheckboxes = details.querySelectorAll(`.ex-of-${prefix}-${sequence.id}:not([disabled])`);
                    if (allExCheckboxes.length > 0) {
                        const allChecked = Array.from(allExCheckboxes).every(input => input.checked);
                        const noneChecked = Array.from(allExCheckboxes).every(input => !input.checked);
                        sequenceCheckbox.checked = allChecked;
                        sequenceCheckbox.indeterminate = !allChecked && !noneChecked;
                    } else {
                        sequenceCheckbox.checked = false;
                        sequenceCheckbox.indeterminate = false;
                    }
                }
            });

            sequenceCheckbox.addEventListener('change', () => {
                const isChecked = sequenceCheckbox.checked;
                details.querySelectorAll(`.ex-of-${prefix}-${sequence.id}:not([disabled])`)
                    .forEach(exChk => exChk.checked = isChecked);
                sequenceCheckbox.indeterminate = false;
            });

            if (!hasAvailableExercises) {
                sequenceCheckbox.disabled = true;
                summary.style.color = 'grey';
            }

            container.appendChild(details);
        }
    });

    collapseAllTreeNodes();
}

function adaptModalForMobile() {
    const modal = document.getElementById('modal');
    const modalImg = modal.querySelector('img');

    // --- Création du bouton fermer ---
    let closeButton = modal.querySelector('.close-button');
    if (!closeButton) {
        closeButton = document.createElement('button');
        closeButton.textContent = '✕';
        closeButton.className = 'close-button';
        closeButton.style.position = 'absolute';
        closeButton.style.top = '10px';
        closeButton.style.right = '10px';
        closeButton.style.fontSize = '2rem';
        closeButton.style.color = 'white';
        closeButton.style.background = 'transparent';
        closeButton.style.border = 'none';
        closeButton.style.cursor = 'pointer';
        closeButton.style.zIndex = '10000';

        closeButton.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.appendChild(closeButton);
    }

    if (modal && modalImg) {
        modal.style.position = 'fixed';
        modal.style.top = '0';
        modal.style.left = '0';
        modal.style.width = '100%';
        modal.style.height = '100%';
        modal.style.backgroundColor = 'rgba(0,0,0,0.9)';
        modal.style.display = 'flex';
        modal.style.flexDirection = 'column';
        modal.style.justifyContent = 'center';
        modal.style.alignItems = 'center';
        modal.style.zIndex = '9999';
        modal.style.paddingTop = '40px'; // Laisse de la place pour le bouton fermer

        modalImg.style.maxWidth = '90%';
        modalImg.style.maxHeight = '80%';
        modalImg.style.objectFit = 'contain';
    }
}

// --- Initialisation au chargement de la page ---
document.addEventListener('DOMContentLoaded', () => {
    console.log("DOM Chargé. Initialisation...");

    // 1. Construire l'interface de l'arbre des leçons
    renderSequences();

    // 2. Configurer l'affichage Debug
    const debugInfoDiv = document.getElementById('debug-info');
    if (debugInfoDiv) {
        debugInfoDiv.style.display = isDebugMode() ? 'block' : 'none';
        if (isDebugMode()) console.log("Mode Debug Activé.");
    }

    // 3. Activer le Mode Quiz par défaut ET générer la première playlist Quiz
    toggleQuizMode(); // Cette fonction appelle maintenant generateQuizPlaylist()

    // 4. ÉCOUTEUR GLOBAL pour la mise à jour de la playlist Leçon (ORDONNÉE)
    const lessonContainer = document.getElementById('lessons-container');
    if (lessonContainer) {
        lessonContainer.addEventListener('change', (event) => {
            // Si une checkbox change PENDANT le mode Leçon
            if (event.target.type === 'checkbox') {
                const lessonTree = document.getElementById('lesson-tree');
                if (lessonTree && lessonTree.style.display === 'block') {
                    console.log("Checkbox modifiée -> Mise à jour playlist Leçon (ordonnée)...");
                    updateLessonPlaylistOrdered(); // Mettre à jour avec la version ordonnée
                }
            }
        });
    } else {
        console.error("Élément #lessons-container non trouvé pour l'écouteur 'change' !");
    }

    // 5. Attacher les écouteurs aux boutons de contrôle
    document.getElementById('next-button')?.addEventListener('click', playNext);
    document.getElementById('prev-button')?.addEventListener('click', playPrevious);
    document.getElementById('repeat-button')?.addEventListener('click', repeatTrack);
    // Le bouton "random-button" a sa propre fonction de gestion maintenant
    document.getElementById('random-button')?.addEventListener('click', handleRandomButton);
    document.getElementById('lesson-mode')?.addEventListener('click', toggleLessonMode);
    document.getElementById('quiz-mode')?.addEventListener('click', toggleQuizMode);
    document.getElementById('collapse-all')?.addEventListener('click', collapseAllTreeNodes);
    document.getElementById('expand-all')?.addEventListener('click', expandAllTreeNodes);
    // Attacher le listener pour le nouveau bouton "Réinitialiser Ordre"
    document.getElementById('order-lesson-button')?.addEventListener('click', handleOrderLessonButton);

    // 6. Replier tous les nœuds de l'arbre par défaut
    collapseAllTreeNodes();

    document.addEventListener('keydown', handleKeyPress);

    console.log("Initialisation terminée. Mode Quiz actif.");
});


document.addEventListener('DOMContentLoaded', () => {
    const btnSeq    = document.querySelector('button#tab-sequences');
    const btnLess   = document.querySelector('button#tab-lessons');
    const modeLecon = document.querySelector('lesson-mode'); // ajustez le sélecteur si besoin

    // Fonction qui force l'état : Séquences = active, Leçons = inactive
    function activateSequences() {
      btnSeq.classList.add('active');
      btnSeq.classList.remove('inactive');

      btnLess.classList.add('inactive');
      btnLess.classList.remove('active');
    }

    activateSequences();
    if(modelecon) {
    // Au clic sur "mode Leçon"
    modeLecon.addEventListener('click', (e) => {
      e.preventDefault();
      activateSequences();
      // ici vous pouvez aussi déclencher le reste de votre logique "mode leçon"
    });
    }

  });



// Optionnel : Définir un état initial au chargement de la page
// Par exemple, si l'arbre est initialement déplié (bouton Expand actif)
document.addEventListener('DOMContentLoaded', () => {
    const collapseBtn = document.querySelector('.tree-control-btn-collapse');
    const expandBtn = document.querySelector('.tree-control-btn-expand');


/*
    if (collapseBtn && expandBtn) {
        // État initial : Déplié (Expand actif, Collapse inactif)
        expandBtn.classList.add('Plusactive');   // Vert
        collapseBtn.classList.add('Minusinactive'); // Vert
        
        // Si initialement plié (Collapse actif, Expand inactif) :
        // collapseBtn.classList.add('active'); // Rouge
        // expandBtn.classList.add('inactive');  // Rouge
    }*/
});
