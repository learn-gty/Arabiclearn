<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apprentissage des pays arabes et nationalit√©s</title>
  <style>
    /* CSS du cahier des charges (voir paste.txt) */
    :root {
      --pal-red: #E4312b;
      --pal-black: #000;
      --pal-white: #fff;
      --pal-green: #149954;
      --container-bg: rgba(255,255,255,0.98);
      --container-border: #ddd;
      --button-bg: var(--pal-black);
      --button-text: var(--pal-white);
      --button-hover-bg: var(--pal-red);
      --button-hover-text: var(--pal-white);
      --stats-bg: #f4f4f4;
    }
    body.dark-mode {
      --container-bg: rgba(24,24,24,0.96);
      --container-border: #444;
      --button-bg: var(--pal-white);
      --button-text: var(--pal-white);
      --button-hover-bg: var(--pal-red);
      --button-hover-text: var(--pal-black);
      --stats-bg: #232323;
    }
    body {
      min-height: 100vh;
      font-family: 'Quicksand', Arial, sans-serif;
      background:
        linear-gradient(to bottom, var(--pal-black) 0 33%, var(--pal-white) 33% 66%, var(--pal-green) 66% 100%),
        linear-gradient(135deg, var(--pal-red) 0 32%, transparent 32% 100%);
      color: var(--pal-black);
      margin: 0;
      padding: 0;
      line-height: 1.1;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 30vw; height: 100vh;
      background: var(--pal-red);
      clip-path: polygon(0 0, 100% 50%, 0 100%);
      z-index: 0;
      opacity: 0.7;
      pointer-events: none;
    }
    .container {
      position: relative;
      z-index: 1;
      max-width: 900px;
      width: 99vw;
      margin: 10px auto 0 auto;
      background: var(--container-bg);
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.08);
      padding: 15px 10px;
      border: 1px solid var(--container-border);
      display: flex;
      flex-direction: column;
      animation: slideIn 0.8s ease-out;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
    }
    h1, h2 {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      color: var(--pal-red);
      text-align: center;
      letter-spacing: 0.5px;
      animation: fadeInScale 1s ease-out;
    }
    @keyframes fadeInScale {
      from { opacity: 0; transform: scale(0.8);}
      to { opacity: 1; transform: scale(1);}
    }
    #question {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 1rem 0;
      text-align: center;
      color: var(--pal-black);
      min-height: 40px;
      padding: 15px;
      background: var(--stats-bg);
      border-radius: 8px;
      border-left: 4px solid var(--pal-red);
    }
    body.dark-mode #question { color: var(--pal-white);}
    .tableau-reponses {
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
      background: var(--container-bg);
      border: 2px solid var(--pal-black);
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      animation: tableSlide 0.6s ease-out;
      font-size: 0.85rem;
    }
    @keyframes tableSlide {
      from { opacity: 0; transform: translateX(-20px);}
      to { opacity: 1; transform: translateX(0);}
    }
    .tableau-reponses td {
      min-width: 80px;
      border: 1px solid var(--pal-black);
      text-align: center;
      vertical-align: middle;
      font-weight: 600;
      line-height: 1.1;
      transition: all 0.3s ease;
      padding: 8px;
    }
    .checkbox-cell {
      background-color: var(--stats-bg);
      padding: 8px;
      height: 40px;
    }
    body.dark-mode .checkbox-cell { background-color: var(--stats-bg);}
    .checkbox-cell:hover {
      background: rgba(228, 49, 43, 0.1);
      transform: scale(1.01);
    }
    .checkbox-cell input[type="checkbox"] {
      width: 16px;
      height: 16px;
      cursor: pointer;
      margin: 0;
      accent-color: var(--pal-red);
      transform: scale(1.1);
    }
    .checkbox-cell input[type="checkbox"]:checked {
      animation: checkBounce 0.3s ease-out;
    }

body.dark-mode .tableau-reponses td,
body.dark-mode .tableau-reponses label {
    color: #fff !important;
}

    @keyframes checkBounce {
      0% { transform: scale(1.1);}
      50% { transform: scale(1.3);}
      100% { transform: scale(1.1);}
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin: 25px 0;
      font-size: 0.87rem;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      padding: 20px;
      background-color: var(--stats-bg);
      border-radius: 8px;
      border-left: 4px solid var(--pal-red);
    }
    body.dark-mode .controls { background-color: var(--stats-bg);}
    .controls:hover { transform: translateY(-2px);}
    .control-group {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }
    input[type="number"], select {
      padding: 8px 12px;
      margin-left: 10px;
      border: 2px solid var(--pal-black);
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      color: var(--pal-black);
      background: var(--container-bg);
      transition: all 0.3s ease;
    }
    body.dark-mode input[type="number"], 
    body.dark-mode select {
      color: var(--pal-white);
      border-color: var(--pal-white);
      background: #232323;
    }
    input[type="number"]:focus, select:focus {
      border-color: var(--pal-green);
      outline: none;
      box-shadow: 0 0 0 2px rgba(20, 153, 84, 0.2);
    }
    .buttons {
      margin-top: 25px;
      text-align: center;
    }
    button {
      background-color: var(--button-bg);
      color: var(--button-text);
      border: 1px solid var(--pal-black);
      border-radius: 4px;
      padding: 12px 25px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.18s ease;
      white-space: nowrap;
      line-height: 1;
      margin: 0 10px;
    }
    button:hover:not(:disabled) {
      background-color: var(--button-hover-bg);
      color: var(--button-hover-text);
      border: 1px solid var(--pal-red);
      transform: translateY(-1px);
    }
    button:active { transform: translateY(1px);}
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .feedback {
      font-weight: 700;
      min-height: 20px;
      margin: 1rem 0;
      text-align: center;
      font-size: 0.9rem;
      transition: all 0.3s;
      padding: 12px;
      border-radius: 4px;
    }
    .success {
      background: rgba(20, 153, 84, 0.15);
      border-left: 4px solid var(--pal-green);
      color: var(--pal-green);
    }
    .error {
      background: rgba(228, 49, 43, 0.15);
      border-left: 4px solid var(--pal-red);
      color: var(--pal-red);
    }
    @media (max-width: 768px) {
      .container { max-width: 100vw; padding: 8px 4vw; margin: 2vw auto 0 auto;}
      .controls { justify-content: center; flex-direction: column; gap: 8px;}
      .tableau-reponses td { font-size: 14px; height: 45px; min-width: 60px;}
      .checkbox-cell input[type="checkbox"] { width: 12px; height: 12px; transform: scale(0.9);}
    }
    @media (max-width: 480px) {
      .container { width: 98vw; padding: 8px 3px;}
      .tableau-reponses td { min-width: 35px; height: 35px; font-size: 11px;}
      .checkbox-cell input[type="checkbox"] { width: 10px; height: 10px; transform: scale(0.8);}
      h1, h2 { font-size: 1.5rem;}
      #question { font-size: 1.5rem; padding: 8px;}
      button { width: 90%; padding: 10px; font-size: 13px;}
    }
    .menu-hamburger { position: fixed; top: 1rem; left: 1rem; z-index: 1100;}
    .menu-icon {
      display: flex; flex-direction: column; justify-content: center;
      width: 40px; height: 40px; cursor: pointer; transition: transform 0.3s ease;
    }
    .menu-icon span {
      height: 3px; width: 100%; background-color: #333; margin: 5px 0;
      border-radius: 2px; transition: 0.4s ease;
    }
    #menu-toggle { display: none;}
    .menu {
      position: fixed; top: 0; left: -260px; width: 240px; height: 100vh;
      background: #fff; box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
      border-top-right-radius: 16px; border-bottom-right-radius: 16px;
      padding: 60px 0 20px 0; list-style: none; transition: left 0.35s ease;
      font-family: 'Segoe UI', Arial, sans-serif; overflow-y: auto;
    }
    .menu li { margin: 0; padding: 0;}
    .menu li a {
      display: block; padding: 14px 24px; color: #333; font-size: 1rem;
      text-decoration: none; border-left: 4px solid transparent;
      transition: background-color 0.25s, border-color 0.25s;
    }
    .menu li a:hover {
      background-color: #f5f5f5; color: #007a33; border-left: 4px solid #007a33;
    }
    #menu-toggle:checked ~ .menu { left: 0;}
    #menu-toggle:checked + .menu-icon span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);}
    #menu-toggle:checked + .menu-icon span:nth-child(2) { opacity: 0;}
    #menu-toggle:checked + .menu-icon span:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);}
    @media (max-width: 600px) {
      .menu { width: 80vw; max-width: 300px; border-radius: 0 16px 16px 0; left: -300px;}
      .menu li a { font-size: 0.95rem; padding: 12px 20px;}
      .menu-icon { width: 36px; height: 36px;}
      .menu-icon span { margin: 4px 0;}
      #content-wrapper { z-index: 0; position: relative; }

      /* Pour tous les boutons avec texte arabe */
.mode-btn[dir="rtl"] {
  direction: rtl;
  text-align: right; /* Optionnel, am√©liore l‚Äôalignement */
}

    }


/* Affichage vertical des boutons de r√©ponse sur mobile */
@media (max-width: 700px), (pointer: coarse) {
  .mobile-choices {
    display: flex;
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
    margin: 20px 0;
  }
  .mobile-choices button {
    width: 100%;
    font-size: 1.1em;
    padding: 14px 0;
    border-radius: 6px;
    border: 2px solid var(--pal-black);
    background: var(--container-bg);
    color: var(--pal-black);
    transition: background 0.2s, color 0.2s, border 0.2s;
    font-weight: 600;
    outline: none;
  }
  .mobile-choices button.selected {
    background: var(--pal-red);
    color: #fff;
    border-color: var(--pal-red);
  }
  .mobile-choices button:active {
    filter: brightness(0.95);
  }
  body.dark-mode .mobile-choices button {
    background: #232323;
    color: #fff;
    border-color: #fff;
  }
  body.dark-mode .mobile-choices button.selected {
    background: var(--pal-red);
    color: #fff;
    border-color: var(--pal-red);
  }
}

/* Pour l'affichage vertical des boutons de r√©ponse sur mobile */
@media (max-width: 700px), (pointer: coarse) {
  .mobile-choices {
    display: flex;
    flex-direction: column;
    gap: 14px;
    align-items: stretch;
    margin: 20px 0;
  }
  .mobile-choices button {
    width: 100%;
    font-size: 1.2em;
    padding: 16px 0;
    border-radius: 6px;
    border: 2px solid var(--pal-black);
    background: var(--container-bg);
    color: var(--pal-black);
    transition: background 0.2s, color 0.2s, border 0.2s;
    font-weight: 600;
    outline: none;
  }
  .mobile-choices button.selected {
    background: var(--pal-red);
    color: #fff;
    border-color: var(--pal-red);
  }
  .mobile-choices button:active {
    filter: brightness(0.95);
  }
  body.dark-mode .mobile-choices button {
    background: #232323;
    color: #fff;
    border-color: #fff;
  }
  body.dark-mode .mobile-choices button.selected {
    background: var(--pal-red);
    color: #fff;
    border-color: var(--pal-red);
  }
}
/* Cacher le tableau des coches sur mobile */
@media (max-width: 700px), (pointer: coarse) {
  .tableau-reponses {
    display: none !important;
  }
}

td[dir="rtl"], span[dir="rtl"], label[dir="rtl"] {
  direction: rtl;
  text-align: right;

}

[dir="rtl"][lang="ar"] {
  text-align: right;
  direction: rtl;
  font-family: 'Arial', 'Tahoma', sans-serif; /* police adapt√©e √† l'arabe */
}
/* üîΩ Ajout sp√©cifique pour garantir l'affichage correct de l'arabe */
.texte-arabe,
[dir="rtl"][lang="ar"],
span[lang="ar"],
label[lang="ar"],
td[lang="ar"] {
  direction: rtl !important;
  text-align: center !important;
  font-family: 'Amiri', 'Scheherazade New', 'Noto Naskh Arabic', 'Arial', 'Tahoma', sans-serif !important;
  font-size: 2.0em;
  line-height: 1.6;
  unicode-bidi: isolate; /* essentiel pour forcer le regroupement logique */
}

/* üì± Bonus mobile : am√©liore le rendu arabe sur petit √©cran */
@media (max-width: 600px) {
  .texte-arabe,
  [dir="rtl"][lang="ar"] {
    font-size: 1.2em;
  }
}
  </style>
</head>
<body>
<nav class="menu-hamburger">
  <input type="checkbox" id="menu-toggle" />
  <label for="menu-toggle" class="menu-icon">
    <span></span>
    <span></span>
    <span></span>
  </label>
  <ul class="menu">
  <li><a href="../index.html">Accueil</a></li>
    <li><a href="ar50.html">S√©quences & Le√ßons</a></li>
    <li><a href="pronoms.html">Pronoms</a></li>
    <li><a href="pronomsPossessifs.html">Possessifs</a></li>
    <li><a href="LunaireSolaire.html">Lettres Lunaires/Solaires</a></li>
    <li><a href="chiffres.3.html">Exercice Chiffres </a></li>
    <li><a href="ChiffresEx.3.5.html">Autres Exercice Chiffres</a></li>
    <li><a href="Verb.1.1.html">Conjugaison (1er verbes)</a></li> 
    <li><a href="PaysEtNationalit√©s.html">Pays Et Nationalit√©s</a></li>  
    <li><a href="PageUnderConstruction.html">Suite...</a></li> </ul>
</nav>
  <div id="content-wrapper">
    <div class="container">
      <h1>Apprentissage : Pays arabes & Nationalit√©s</h1>
      <div class="controls">
        <div class="control-group">
          <label for="mode-select">Mode :</label>
          <select id="mode-select">
            <option value="country-fr-to-ar">Pays (fran√ßais ‚Üí arabe)</option>
            <option value="country-ar-to-fr">Pays (arabe ‚Üí fran√ßais)</option>
            <option value="nat-m-sg-fr-to-ar">Nationalit√© masc. sg (fr ‚Üí ar)</option>
            <option value="nat-m-pl-fr-to-ar">Nationalit√© masc. pl (fr ‚Üí ar)</option>
            <option value="nat-f-sg-fr-to-ar">Nationalit√© f√©m. sg (fr ‚Üí ar)</option>
            <option value="nat-f-pl-fr-to-ar">Nationalit√© f√©m. pl (fr ‚Üí ar)</option>
            <option value="nat-m-sg-ar-to-fr">Nationalit√© masc. sg (ar ‚Üí fr)</option>
            <option value="nat-m-pl-ar-to-fr">Nationalit√© masc. pl (ar ‚Üí fr)</option>
            <option value="nat-f-sg-ar-to-fr">Nationalit√© f√©m. sg (ar ‚Üí fr)</option>
            <option value="nat-f-pl-ar-to-fr">Nationalit√© f√©m. pl (ar ‚Üí fr)</option>
            <option value="quizz-mix">Quizz (modes m√©lang√©s)</option>
          </select>
        </div>
      <div class="control-group">
      <label for="level-select">Niveau :</label>
      <select id="level-select">
        <option value="1">Niveau 1</option>
        <option value="2">Niveau 2</option>
      </select>
      </div>
        <div class="control-group">
          <label for="timer-input">D√©lai (s) :</label>
          <input type="number" id="timer-input" min="10" max="600" value="120">
        </div>
        <div class="control-group">
          <button onclick="toggleDarkMode()">Clair/Sombre</button>
        </div>
        <div class="control-group">
          <button onclick="showCountriesPopup()">Pays</button>
          <button onclick="showNationalitiesPopup()">Nationalit√©s</button>
          <button onclick="showRulesPopup()">R√®gles</button>
        </div>
      </div>
      <div id="stats">
        <span>‚úÖ <span id="good-count">0</span></span> &nbsp; 
        <span>‚ùå <span id="bad-count">0</span></span>
        <span id="timer" style="float:right;"></span>
      </div>

      <div class="feedback" id="feedback"></div>
      <div class="buttons" id="action-buttons"></div>
      <div id="question"></div>
      <div id="reponses"></div>
     
    </div>
  </div>
  <!-- Popups p√©dagogiques -->
  <div id="popup-overlay" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:10000;background:rgba(0,0,0,0.25);">
    <div id="popup-content" style="background:white;max-width:90vw;max-height:80vh;overflow:auto;position:relative;margin:5vh auto;padding:24px;border-radius:10px;box-shadow:0 8px 32px rgba(0,0,0,0.25);">
      <button onclick="closePopup()" style="position:absolute;top:10px;right:10px;font-size:1.3em;padding:5px">&times;</button>
      <button onclick="closePopup()" style="position:absolute;top:10px;left:10px;font-size:1.1em;padding:5px">Fermer</button>
      <div id="popup-inner"></div>
    </div>
  </div>
  <script>






    // --- Donn√©es niveau 1 ---
    const data = [
      {
        arabicCountry: 'ŸèÔ∫èŸêÔ∫ÆŸíÔªêŸéÔª§Ôªüÿß',
        frenchCountry: 'Maroc',
        translitCountry: 'al-maghrib',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫ëŸêÔ∫ÆŸíÔªêŸéÔª£',
        frenchNationalityPlurielMale: 'Marocains',
        translitNationalityPlurielMale: 'maghribiyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫ëŸêÔ∫ÆŸíÔªêŸéÔª£',
        frenchNationalitySingularMale: 'Marocain',
        translitNationalitySingularMale: 'maghribiyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫ëŸêÔ∫ÆŸíÔªêŸéÔª£',
        frenchNationalityPlurielFemale: 'Marocaines',
        translitNationalityPlurielFemale: 'maghribiyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫ëŸêÔ∫ÆŸíÔªêŸéÔª£',
        frenchNationalitySingularFemale: 'Marocaine',
        translitNationalitySingularFemale: 'maghribiyya'
      },
      {
        arabicCountry: 'Ô∫ÆŸêÔ∫ãÿßŸéÔ∫∞ŸéÔ∫†Ôªüÿß',
        frenchCountry: 'Alg√©rie',
        translitCountry: 'al-jazƒÅ\'ir',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫ÆŸêÔ∫ãÿßŸéÔ∫∞ŸéÔ∫ü',
        frenchNationalityPlurielMale: 'Alg√©riens',
        translitNationalityPlurielMale: 'jazƒÅ‚Äôiriyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫ÆŸêÔ∫ãÿßŸéÔ∫∞ŸéÔ∫ü',
        frenchNationalitySingularMale: 'Alg√©rien',
        translitNationalitySingularMale: 'jazƒÅ‚Äôiriyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫ÆŸêÔ∫ãÿßŸéÔ∫∞ŸéÔ∫ü',
        frenchNationalityPlurielFemale: 'Alg√©riennes',
        translitNationalityPlurielFemale: 'jazƒÅ‚ÄôiriyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫ÆŸêÔ∫ãÿßŸéÔ∫∞ŸéÔ∫ü',
        frenchNationalitySingularFemale: 'Alg√©rienne',
        translitNationalitySingularFemale: 'jazƒÅ‚Äôiriyya'
      },
      {
        arabicCountry: 'ŸèÔ∫≤ŸêÔªßÔªÆŸèÔ∫ó',
        frenchCountry: 'Tunisie',
        translitCountry: 't≈´nis',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫¥ŸêÔªßÔªÆŸèÔ∫ó',
        frenchNationalityPlurielMale: 'Tunisiens',
        translitNationalityPlurielMale: 't≈´nisiyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫¥ŸêÔªßÔªÆŸèÔ∫ó',
        frenchNationalitySingularMale: 'Tunisien',
        translitNationalitySingularMale: 't≈´nisiyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫¥ŸêÔªßÔªÆŸèÔ∫ó',
        frenchNationalityPlurielFemale: 'Tunisiennes',
        translitNationalityPlurielFemale: 't≈´nisiyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫¥ŸêÔªßÔªÆŸèÔ∫ó',
        frenchNationalitySingularFemale: 'Tunisienne',
        translitNationalitySingularFemale: 't≈´nisiyya'
      },
      {
        arabicCountry: 'Ô∫éŸéÔª¥ŸêÔ∫íÔª¥ŸêÔªü',
        frenchCountry: 'Libye',
        translitCountry: 'lƒ´biyƒÅ',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫íÔª¥ŸêÔªü',
        frenchNationalityPlurielMale: 'Libyens',
        translitNationalityPlurielMale: 'lƒ´biyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫íÔª¥ŸêÔªü',
        frenchNationalitySingularMale: 'Libyen',
        translitNationalitySingularMale: 'lƒ´biyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫íÔª¥ŸêÔªü',
        frenchNationalityPlurielFemale: 'Libyennes',
        translitNationalityPlurielFemale: 'lƒ´biyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫íÔª¥ŸêÔªü',
        frenchNationalitySingularFemale: 'Libyenne',
        translitNationalitySingularFemale: 'lƒ´biyya'
      },
      {
        arabicCountry: 'ŸèÔ∫ÆŸíÔ∫ºŸêÔª£',
        frenchCountry: '√âgypte',
        translitCountry: 'mi·π£r',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫ÆŸíÔ∫ºŸêÔª£',
        frenchNationalityPlurielMale: '√âgyptiens',
        translitNationalityPlurielMale: 'mi·π£riyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫ÆŸíÔ∫ºŸêÔª£',
        frenchNationalitySingularMale: '√âgyptien',
        translitNationalitySingularMale: 'mi·π£riyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫ÆŸíÔ∫ºŸêÔª£',
        frenchNationalityPlurielFemale: '√âgyptiennes',
        translitNationalityPlurielFemale: 'mi·π£riyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫ÆŸíÔ∫ºŸêÔª£',
        frenchNationalitySingularFemale: '√âgyptienne',
        translitNationalitySingularFemale: 'mi·π£riyya'
      },
      {
        arabicCountry: 'ŸèÔª•ÿßŸéÔ∫©ÔªÆŸëŸèÔ∫¥Ôªüÿß',
        frenchCountry: 'Soudan',
        translitCountry: 'as-s≈´dƒÅn',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÿßŸéÔ∫©ÔªÆŸèÔ∫≥',
        frenchNationalityPlurielMale: 'Soudanais',
        translitNationalityPlurielMale: 's≈´dƒÅniyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÿßŸéÔ∫©ÔªÆŸèÔ∫≥',
        frenchNationalitySingularMale: 'Soudanais',
        translitNationalitySingularMale: 's≈´dƒÅniyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÿßŸéÔ∫©ÔªÆŸèÔ∫≥',
        frenchNationalityPlurielFemale: 'Soudanaises',
        translitNationalityPlurielFemale: 's≈´dƒÅniyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÿßŸéÔ∫©ÔªÆŸèÔ∫≥',
        frenchNationalitySingularFemale: 'Soudanaise',
        translitNationalitySingularFemale: 's≈´dƒÅniyya'
      },
      {
        arabicCountry: 'ŸèÔª•Ô∫éŸéÔª®ŸíÔ∫íŸèÔªü',
        frenchCountry: 'Liban',
        translitCountry: 'lubnƒÅn',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÔ∫éŸéÔª®ŸíÔ∫íŸèÔªü',
        frenchNationalityPlurielMale: 'Libanais',
        translitNationalityPlurielMale: 'lubnƒÅniyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÔ∫éŸéÔª®ŸíÔ∫íŸèÔªü',
        frenchNationalitySingularMale: 'Libanais',
        translitNationalitySingularMale: 'lubnƒÅniyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔª®ŸíÔ∫íŸèÔªü',
        frenchNationalityPlurielFemale: 'Libanaises',
        translitNationalityPlurielFemale: 'lubnƒÅniyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔª®ŸíÔ∫íŸèÔªü',
        frenchNationalitySingularFemale: 'Libanaise',
        translitNationalitySingularFemale: 'lubnƒÅniyya'
      },
      {
        arabicCountry: 'Ô∫éŸéÔª≥ŸêÔ∫≠ÔªÆŸèÔ∫≥',
        frenchCountry: 'Syrie',
        translitCountry: 's≈´riyƒÅ',
        arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫≠ÔªÆŸèÔ∫≥',
        frenchNationalityPlurielMale: 'Syriens',
        translitNationalityPlurielMale: 's≈´riyy≈´n',
        arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫≠ÔªÆŸèÔ∫≥',
        frenchNationalitySingularMale: 'Syrien',
        translitNationalitySingularMale: 's≈´riyy',
        arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫≠ÔªÆŸèÔ∫≥',
        frenchNationalityPlurielFemale: 'Syriennes',
        translitNationalityPlurielFemale: 's≈´riyyƒÅt',
        arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫≠ÔªÆŸèÔ∫≥',
        frenchNationalitySingularFemale: 'Syrienne',
        translitNationalitySingularFemale: 's≈´riyya'
      }
    ];


 const dataLevel2 =[
  {
    arabicCountry: 'Ô∫éÔª¥ÔªßÔ∫éÔ∫òÔª≥Ô∫≠ÔªÆÔª£',
    frenchCountry: 'Mauritanie',
    translitCountry: 'm≈´ritƒÅniyƒÅ',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÔ∫éŸéÔ∫òÔª≥ŸêÔ∫≠ÔªÆŸèÔª£',
    frenchNationalityPlurielMale: 'Mauritaniens',
    translitNationalityPlurielMale: 'm≈´ritƒÅniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÔ∫éŸéÔ∫òÔª≥ŸêÔ∫≠ÔªÆŸèÔª£',
    frenchNationalitySingularMale: 'Mauritanien',
    translitNationalitySingularMale: 'm≈´ritƒÅniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔ∫òÔª≥ŸêÔ∫≠ÔªÆŸèÔª£',
    frenchNationalityPlurielFemale: 'Mauritaniennes',
    translitNationalityPlurielFemale: 'm≈´ritƒÅniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔ∫òÔª≥ŸêÔ∫≠ÔªÆŸèÔª£',
    frenchNationalitySingularFemale: 'Mauritanienne',
    translitNationalitySingularFemale: 'm≈´ritƒÅniyya'
  },
  {
    arabicCountry: 'Ôª≤ÔªüÔ∫éÔª£',
    frenchCountry: 'Mali',
    translitCountry: 'mƒÅlƒ´',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªüÔ∫éŸéÔª£',
    frenchNationalityPlurielMale: 'Maliens',
    translitNationalityPlurielMale: 'mƒÅliyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªüÔ∫éŸéÔª£',
    frenchNationalitySingularMale: 'Malien',
    translitNationalitySingularMale: 'mƒÅliyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔª£',
    frenchNationalityPlurielFemale: 'Maliennes',
    translitNationalityPlurielFemale: 'mƒÅliyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔª£',
    frenchNationalitySingularFemale: 'Malienne',
    translitNationalitySingularFemale: 'mƒÅliyya'
  },
  {
    arabicCountry: 'Ô∫ÆÔ∫†Ôª¥Ôª®Ôªüÿß',
    frenchCountry: 'Niger',
    translitCountry: 'an-nƒ´jar',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫ÆŸéÔ∫†Ôª¥ŸêÔªß',
    frenchNationalityPlurielMale: 'Nig√©riens',
    translitNationalityPlurielMale: 'nƒ´jariyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫ÆŸéÔ∫†Ôª¥ŸêÔªß',
    frenchNationalitySingularMale: 'Nig√©rien',
    translitNationalitySingularMale: 'nƒ´jariyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫ÆŸéÔ∫†Ôª¥ŸêÔªß',
    frenchNationalityPlurielFemale: 'Nig√©riennes',
    translitNationalityPlurielFemale: 'nƒ´jariyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫ÆŸéÔ∫†Ôª¥ŸêÔªß',
    frenchNationalitySingularFemale: 'Nig√©rienne',
    translitNationalitySingularFemale: 'nƒ´jariyya'
  },
  {
    arabicCountry: 'Ô∫©Ô∫éÔ∫∏Ô∫ó',
    frenchCountry: 'Tchad',
    translitCountry: 't≈°ƒÅd',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫©Ô∫éŸéÔ∫∏ŸéÔ∫ó',
    frenchNationalityPlurielMale: 'Tchadiens',
    translitNationalityPlurielMale: 't≈°ƒÅdiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫©Ô∫éŸéÔ∫∏ŸéÔ∫ó',
    frenchNationalitySingularMale: 'Tchadien',
    translitNationalitySingularMale: 't≈°ƒÅdiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫©Ô∫éŸéÔ∫∏ŸéÔ∫ó',
    frenchNationalityPlurielFemale: 'Tchadiennes',
    translitNationalityPlurielFemale: 't≈°ƒÅdiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫©Ô∫éŸéÔ∫∏ŸéÔ∫ó',
    frenchNationalitySingularFemale: 'Tchadienne',
    translitNationalitySingularFemale: 't≈°ƒÅdiyya'
  },
  {
    arabicCountry: 'Ô∫éÔª≥Ô∫ÆÔ∫òÔª≥Ô∫≠Ô∫á',
    frenchCountry: '√ârythr√©e',
    translitCountry: 'irƒ´triyƒÅ',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫ÆŸíÔ∫òÔª≥ŸêÔ∫≠ŸêÔ∫á',
    frenchNationalityPlurielMale: '√ârythr√©ens',
    translitNationalityPlurielMale: 'irƒ´triyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫ÆŸíÔ∫òÔª≥ŸêÔ∫≠ŸêÔ∫á',
    frenchNationalitySingularMale: '√ârythr√©en',
    translitNationalitySingularMale: 'irƒ´triyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫ÆŸíÔ∫òÔª≥ŸêÔ∫≠ŸêÔ∫á',
    frenchNationalityPlurielFemale: '√ârythr√©ennes',
    translitNationalityPlurielFemale: 'irƒ´triyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫ÆŸíÔ∫òÔª≥ŸêÔ∫≠ŸêÔ∫á',
    frenchNationalitySingularFemale: '√ârythr√©enne',
    translitNationalitySingularFemale: 'irƒ´triyya'
  },
  {
    arabicCountry: 'Ôª¶Ôª¥ÔªÑÔ∫¥Ôª†Ôªì',
    frenchCountry: 'Palestine',
    translitCountry: 'falastƒ´n',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔª®Ôª¥ŸêÔªÑŸíÔ∫¥ŸéÔª†ŸêÔªì',
    frenchNationalityPlurielMale: 'Palestiniens',
    translitNationalityPlurielMale: 'falastƒ´niyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔª®Ôª¥ŸêÔªÑŸíÔ∫¥ŸéÔª†ŸêÔªì',
    frenchNationalitySingularMale: 'Palestinien',
    translitNationalitySingularMale: 'falastƒ´niyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔª®Ôª¥ŸêÔªÑŸíÔ∫¥ŸéÔª†ŸêÔªì',
    frenchNationalityPlurielFemale: 'Palestiniennes',
    translitNationalityPlurielFemale: 'falastƒ´niyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔª®Ôª¥ŸêÔªÑŸíÔ∫¥ŸéÔª†ŸêÔªì',
    frenchNationalitySingularFemale: 'Palestinienne',
    translitNationalitySingularFemale: 'falastƒ´niyya'
  },
  {
    arabicCountry: 'ÔªïÿßÔ∫ÆÔªåÔªüÿß',
    frenchCountry: 'Irak',
    translitCountry: 'al-‚ÄòirƒÅq',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªóÿßŸéÔ∫ÆŸêÔªã',
    frenchNationalityPlurielMale: 'Irakiens',
    translitNationalityPlurielMale: '‚ÄòirƒÅqiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªóÿßŸéÔ∫ÆŸêÔªã',
    frenchNationalitySingularMale: 'Irakien',
    translitNationalitySingularMale: '‚ÄòirƒÅqiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªóÿßŸéÔ∫ÆŸêÔªã',
    frenchNationalityPlurielFemale: 'Irakiennes',
    translitNationalityPlurielFemale: '‚ÄòirƒÅqiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªóÿßŸéÔ∫ÆŸêÔªã',
    frenchNationalitySingularFemale: 'Irakienne',
    translitNationalitySingularFemale: '‚ÄòirƒÅqiyya'
  },
  {
    arabicCountry: 'Ôª•Ô∫©Ô∫≠Ôª∑ÿß',
    frenchCountry: 'Jordanie',
    translitCountry: 'al-urdunn',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßŸèÔ∫©ŸíÔ∫≠ŸèÔ∫É',
    frenchNationalityPlurielMale: 'Jordaniens',
    translitNationalityPlurielMale: 'urdunniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßŸèÔ∫©ŸíÔ∫≠ŸèÔ∫É',
    frenchNationalitySingularMale: 'Jordanien',
    translitNationalitySingularMale: 'urdunniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßŸèÔ∫©ŸíÔ∫≠ŸèÔ∫É',
    frenchNationalityPlurielFemale: 'Jordaniennes',
    translitNationalityPlurielFemale: 'urdunniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßŸèÔ∫©ŸíÔ∫≠ŸèÔ∫É',
    frenchNationalitySingularFemale: 'Jordanienne',
    translitNationalitySingularFemale: 'urdunniyya'
  },
  {
    arabicCountry: 'Ô∫îÔª≥Ô∫©ÔªÆÔªåÔ∫¥Ôªüÿß Ô∫îÔª¥Ô∫ëÔ∫ÆÔªåÔªüÿß Ô∫îÔªúÔª†Ôª§Ôª§Ôªüÿß',
    frenchCountry: 'Arabie Saoudite',
    translitCountry: 'al-mamlaka al-‚Äòarabiyya as-sa‚Äò≈´diyya',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫©ÔªÆŸèÔªåŸéÔ∫≥',
    frenchNationalityPlurielMale: 'Saoudiens',
    translitNationalityPlurielMale: 'sa‚Äò≈´diyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫©ÔªÆŸèÔªåŸéÔ∫≥',
    frenchNationalitySingularMale: 'Saoudien',
    translitNationalitySingularMale: 'sa‚Äò≈´diyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫©ÔªÆŸèÔªåŸéÔ∫≥',
    frenchNationalityPlurielFemale: 'Saoudiennes',
    translitNationalityPlurielFemale: 'sa‚Äò≈´diyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫©ÔªÆŸèÔªåŸéÔ∫≥',
    frenchNationalitySingularFemale: 'Saoudienne',
    translitNationalitySingularFemale: 'sa‚Äò≈´diyya'
  },
  {
    arabicCountry: 'Ôª¶Ôª§Ôª¥Ôªüÿß',
    frenchCountry: 'Y√©men',
    translitCountry: 'al-yaman',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔª®ŸéÔª§ŸéÔª≥',
    frenchNationalityPlurielMale: 'Y√©m√©nites',
    translitNationalityPlurielMale: 'yamaniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔª®ŸéÔª§ŸéÔª≥',
    frenchNationalitySingularMale: 'Y√©m√©nite',
    translitNationalitySingularMale: 'yamaniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔª®ŸéÔª§ŸéÔª≥',
    frenchNationalityPlurielFemale: 'Y√©m√©nites',
    translitNationalityPlurielFemale: 'yamaniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔª®ŸéÔª§ŸéÔª≥',
    frenchNationalitySingularFemale: 'Y√©m√©nite',
    translitNationalitySingularFemale: 'yamaniyya'
  },
  {
    arabicCountry: 'Ôª•Ô∫éÔª§Ôªã',
    frenchCountry: 'Oman',
    translitCountry: '‚ÄòumƒÅn',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÔ∫éŸéÔª§ŸèÔªã',
    frenchNationalityPlurielMale: 'Omanais',
    translitNationalityPlurielMale: '‚ÄòumƒÅniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÔ∫éŸéÔª§ŸèÔªã',
    frenchNationalitySingularMale: 'Omanais',
    translitNationalitySingularMale: '‚ÄòumƒÅniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔª§ŸèÔªã',
    frenchNationalityPlurielFemale: 'Omanaises',
    translitNationalityPlurielFemale: '‚ÄòumƒÅniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔª§ŸèÔªã',
    frenchNationalitySingularFemale: 'Omanaise',
    translitNationalitySingularFemale: '‚ÄòumƒÅniyya'
  },
  {
    arabicCountry: 'Ô∫ìÔ∫™Ô∫§Ô∫òÔª§Ôªüÿß Ô∫îÔª¥Ô∫ëÔ∫ÆÔªåÔªüÿß Ô∫ïÿßÔ∫≠Ô∫éÔª£Ôªπÿß',
    frenchCountry: '√âmirats Arabes Unis',
    translitCountry: 'al-imƒÅrƒÅt al-‚Äòarabiyya al-mutta·∏•ida',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫óÿßŸéÔ∫≠Ô∫éŸéÔª£ŸêÔ∫á',
    frenchNationalityPlurielMale: '√âmiratis',
    translitNationalityPlurielMale: 'imƒÅrƒÅtiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫óÿßŸéÔ∫≠Ô∫éŸéÔª£ŸêÔ∫á',
    frenchNationalitySingularMale: '√âmirati',
    translitNationalitySingularMale: 'imƒÅrƒÅtiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫óÿßŸéÔ∫≠Ô∫éŸéÔª£ŸêÔ∫á',
    frenchNationalityPlurielFemale: '√âmiraties',
    translitNationalityPlurielFemale: 'imƒÅrƒÅtiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫óÿßŸéÔ∫≠Ô∫éŸéÔª£ŸêÔ∫á',
    frenchNationalitySingularFemale: '√âmiratie',
    translitNationalitySingularFemale: 'imƒÅrƒÅtiyya'
  },
  {
    arabicCountry: 'Ô∫ÆÔªÑÔªó',
    frenchCountry: 'Qatar',
    translitCountry: 'qa·π≠ar',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª≥ŸêÔ∫ÆŸéÔªÑŸéÔªó',
    frenchNationalityPlurielMale: 'Qataris',
    translitNationalityPlurielMale: 'qa·π≠ariyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª±ŸêÔ∫ÆŸéÔªÑŸéÔªó',
    frenchNationalitySingularMale: 'Qatari',
    translitNationalitySingularMale: 'qa·π≠ariyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª≥ŸêÔ∫ÆŸéÔªÑŸéÔªó',
    frenchNationalityPlurielFemale: 'Qataries',
    translitNationalityPlurielFemale: 'qa·π≠ariyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª≥ŸêÔ∫ÆŸéÔªÑŸéÔªó',
    frenchNationalitySingularFemale: 'Qatarie',
    translitNationalitySingularFemale: 'qa·π≠ariyya'
  },
  {
    arabicCountry: 'Ôª¶Ôª≥Ô∫ÆÔ∫§Ô∫íÔªüÿß',
    frenchCountry: 'Bahre√Øn',
    translitCountry: 'al-ba·∏•rayn',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔª®ŸíÔª≥ŸéÔ∫ÆŸíÔ∫§ŸéÔ∫ë',
    frenchNationalityPlurielMale: 'Bahre√Øniens',
    translitNationalityPlurielMale: 'ba·∏•rayniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔª®ŸíÔª≥ŸéÔ∫ÆŸíÔ∫§ŸéÔ∫ë',
    frenchNationalitySingularMale: 'Bahre√Ønien',
    translitNationalitySingularMale: 'ba·∏•rayniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔª®ŸíÔª≥ŸéÔ∫ÆŸíÔ∫§ŸéÔ∫ë',
    frenchNationalityPlurielFemale: 'Bahre√Øniennes',
    translitNationalityPlurielFemale: 'ba·∏•rayniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔª®ŸíÔª≥ŸéÔ∫ÆŸíÔ∫§ŸéÔ∫ë',
    frenchNationalitySingularFemale: 'Bahre√Ønienne',
    translitNationalitySingularFemale: 'ba·∏•rayniyya'
  },
  {
    arabicCountry: 'Ô∫ñÔª≥ÔªÆÔªúÔªüÿß',
    frenchCountry: 'Kowe√Øt',
    translitCountry: 'al-kuwayt',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫òŸíÔª≥ŸéÔªÆŸèÔªõ',
    frenchNationalityPlurielMale: 'Kowe√Øtiens',
    translitNationalityPlurielMale: 'kuwaytiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫òŸíÔª≥ŸéÔªÆŸèÔªõ',
    frenchNationalitySingularMale: 'Kowe√Øtien',
    translitNationalitySingularMale: 'kuwaytiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫òŸíÔª≥ŸéÔªÆŸèÔªõ',
    frenchNationalityPlurielFemale: 'Kowe√Øtiennes',
    translitNationalityPlurielFemale: 'kuwaytiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫òŸíÔª≥ŸéÔªÆŸèÔªõ',
    frenchNationalitySingularFemale: 'Kowe√Øtienne',
    translitNationalitySingularFemale: 'kuwaytiyya'
  },
  {
    arabicCountry: 'Ô∫éÔª¥ÔªõÔ∫ÆÔ∫ó',
    frenchCountry: 'Turquie',
    translitCountry: 'turkiyƒÅ',
    arabicNationalityPlurielMale: 'ŸåÔªôÿßŸéÔ∫ÆŸíÔ∫óŸéÔ∫É',
    frenchNationalityPlurielMale: 'Turcs',
    translitNationalityPlurielMale: 'atrƒÅk',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªõŸíÔ∫ÆŸèÔ∫ó',
    frenchNationalitySingularMale: 'Turc',
    translitNationalitySingularMale: 'turkiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªõŸíÔ∫ÆŸèÔ∫ó',
    frenchNationalityPlurielFemale: 'Turques',
    translitNationalityPlurielFemale: 'turkiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªõŸíÔ∫ÆŸèÔ∫ó',
    frenchNationalitySingularFemale: 'Turque',
    translitNationalitySingularFemale: 'turkiyya'
  },
  {
    arabicCountry: 'Ô∫πÔ∫ÆÔ∫íÔªó',
    frenchCountry: 'Chypre',
    translitCountry: 'qubrus',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫ªŸèÔ∫ÆŸíÔ∫íŸèÔªó',
    frenchNationalityPlurielMale: 'Chypriotes',
    translitNationalityPlurielMale: 'qubrusiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫ªŸèÔ∫ÆŸíÔ∫íŸèÔªó',
    frenchNationalitySingularMale: 'Chypriote',
    translitNationalitySingularMale: 'qubrusiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫ªŸèÔ∫ÆŸíÔ∫íŸèÔªó',
    frenchNationalityPlurielFemale: 'Chypriotes',
    translitNationalityPlurielFemale: 'qubrusiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫ªŸèÔ∫ÆŸíÔ∫íŸèÔªó',
    frenchNationalitySingularFemale: 'Chypriote',
    translitNationalitySingularFemale: 'qubrusiyya'
  },
  {
    arabicCountry: 'Ôª•ÿßÔ∫ÆÔª≥Ô∫á',
    frenchCountry: 'Iran',
    translitCountry: 'ƒ´rƒÅn',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÿßŸéÔ∫ÆÔª≥ŸêÔ∫á',
    frenchNationalityPlurielMale: 'Iraniens',
    translitNationalityPlurielMale: 'ƒ´rƒÅniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÿßŸéÔ∫ÆÔª≥ŸêÔ∫á',
    frenchNationalitySingularMale: 'Iranien',
    translitNationalitySingularMale: 'ƒ´rƒÅniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÿßŸéÔ∫ÆÔª≥ŸêÔ∫á',
    frenchNationalityPlurielFemale: 'Iraniennes',
    translitNationalityPlurielFemale: 'ƒ´rƒÅniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÿßŸéÔ∫ÆÔª≥ŸêÔ∫á',
    frenchNationalitySingularFemale: 'Iranienne',
    translitNationalitySingularFemale: 'ƒ´rƒÅniyya'
  },
  {
    arabicCountry: 'Ô∫éÔ∫¥ÔªßÔ∫ÆÔªì',
    frenchCountry: 'France',
    translitCountry: 'faransƒÅ',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔ∫¥ŸíÔªßŸéÔ∫ÆŸéÔªì',
    frenchNationalityPlurielMale: 'Fran√ßais',
    translitNationalityPlurielMale: 'faransiyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔ∫¥ŸíÔªßŸéÔ∫ÆŸéÔªì',
    frenchNationalitySingularMale: 'Fran√ßais',
    translitNationalitySingularMale: 'faransiyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔ∫¥ŸíÔªßŸéÔ∫ÆŸéÔªì',
    frenchNationalityPlurielFemale: 'Fran√ßaises',
    translitNationalityPlurielFemale: 'faransiyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔ∫¥ŸíÔªßŸéÔ∫ÆŸéÔªì',
    frenchNationalitySingularFemale: 'Fran√ßaise',
    translitNationalitySingularFemale: 'faransiyya'
  },
  {
    arabicCountry: 'Ô∫éÔª¥ÔªßÔ∫éÔ∫íÔ∫≥Ô∫á',
    frenchCountry: 'Espagne',
    translitCountry: 'isbƒÅniyƒÅ',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÔ∫éŸéÔ∫íŸíÔ∫≥ŸêÔ∫á',
    frenchNationalityPlurielMale: 'Espagnols',
    translitNationalityPlurielMale: 'isbƒÅniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÔ∫éŸéÔ∫íŸíÔ∫≥ŸêÔ∫á',
    frenchNationalitySingularMale: 'Espagnol',
    translitNationalitySingularMale: 'isbƒÅniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔ∫íŸíÔ∫≥ŸêÔ∫á',
    frenchNationalityPlurielFemale: 'Espagnoles',
    translitNationalityPlurielFemale: 'isbƒÅniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔ∫íŸíÔ∫≥ŸêÔ∫á',
    frenchNationalitySingularFemale: 'Espagnole',
    translitNationalitySingularFemale: 'isbƒÅniyya'
  },
  {
    arabicCountry: 'ÔªùÔ∫éÔªêÔ∫óÔ∫ÆÔ∫íÔªüÿß',
    frenchCountry: 'Portugal',
    translitCountry: 'al-burtughƒÅl',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªüÔ∫éŸéÔªêŸèÔ∫óŸíÔ∫ÆŸèÔ∫ë',
    frenchNationalityPlurielMale: 'Portugais',
    translitNationalityPlurielMale: 'burtughƒÅliy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªüÔ∫éŸéÔªêŸèÔ∫óŸíÔ∫ÆŸèÔ∫ë',
    frenchNationalitySingularMale: 'Portugais',
    translitNationalitySingularMale: 'burtughƒÅliy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔªêŸèÔ∫óŸíÔ∫ÆŸèÔ∫ë',
    frenchNationalityPlurielFemale: 'Portugaises',
    translitNationalityPlurielFemale: 'burtughƒÅliyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔªêŸèÔ∫óŸíÔ∫ÆŸèÔ∫ë',
    frenchNationalitySingularFemale: 'Portugaise',
    translitNationalitySingularFemale: 'burtughƒÅliyya'
  },
  {
    arabicCountry: 'Ô∫éÔª¥ÔªüÔ∫éÔªÑÔª≥Ô∫á',
    frenchCountry: 'Italie',
    translitCountry: 'i·π≠ƒÅliyƒÅ',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªüÔ∫éŸéÔªÑÔª≥ŸêÔ∫á',
    frenchNationalityPlurielMale: 'Italiens',
    translitNationalityPlurielMale: 'i·π≠ƒÅliyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªüÔ∫éŸéÔªÑÔª≥ŸêÔ∫á',
    frenchNationalitySingularMale: 'Italien',
    translitNationalitySingularMale: 'i·π≠ƒÅliyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔªÑÔª≥ŸêÔ∫á',
    frenchNationalityPlurielFemale: 'Italiennes',
    translitNationalityPlurielFemale: 'i·π≠ƒÅliyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªüÔ∫éŸéÔªÑÔª≥ŸêÔ∫á',
    frenchNationalitySingularFemale: 'Italienne',
    translitNationalitySingularFemale: 'i·π≠ƒÅliyya'
  },
  {
    arabicCountry: 'Ôª•Ô∫éÔªßÔªÆÔª¥Ôªüÿß',
    frenchCountry: 'Gr√®ce',
    translitCountry: 'al-y≈´nƒÅn',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔªßÔ∫éŸéÔªßÔªÆŸèÔª≥',
    frenchNationalityPlurielMale: 'Grecs',
    translitNationalityPlurielMale: 'y≈´nƒÅniyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔªßÔ∫éŸéÔªßÔªÆŸèÔª≥',
    frenchNationalitySingularMale: 'Grec',
    translitNationalitySingularMale: 'y≈´nƒÅniyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔªßÔªÆŸèÔª≥',
    frenchNationalityPlurielFemale: 'Grecques',
    translitNationalityPlurielFemale: 'y≈´nƒÅniyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔªßÔ∫éŸéÔªßÔªÆŸèÔª≥',
    frenchNationalitySingularFemale: 'Grecque',
    translitNationalitySingularFemale: 'y≈´nƒÅniyya'
  },
  {
    arabicCountry: 'ÔªûÔª¥Ô∫ãÿßÔ∫ÆÔ∫≥Ô∫á',
    frenchCountry: 'Isra√´l',
    translitCountry: 'isrƒÅ‚Äôƒ´l',
    arabicNationalityPlurielMale: 'ŸéÔª•ÔªÆŸëŸèÔª¥ŸêÔª†Ôª¥ŸêÔ∫ãÿßŸéÔ∫ÆŸíÔ∫≥ŸêÔ∫á',
    frenchNationalityPlurielMale: 'Isra√©liens',
    translitNationalityPlurielMale: 'isrƒÅ‚Äôƒ´liyy≈´n',
    arabicNationalitySingularMale: 'ŸëŸåÔª≤ŸêÔª†Ôª¥ŸêÔ∫ãÿßŸéÔ∫ÆŸíÔ∫≥ŸêÔ∫á',
    frenchNationalitySingularMale: 'Isra√©lien',
    translitNationalitySingularMale: 'isrƒÅ‚Äôƒ´liyy',
    arabicNationalityPlurielFemale: 'ŸåÔ∫ïÔ∫éŸëŸéÔª¥ŸêÔª†Ôª¥ŸêÔ∫ãÿßŸéÔ∫ÆŸíÔ∫≥ŸêÔ∫á',
    frenchNationalityPlurielFemale: 'Isra√©liennes',
    translitNationalityPlurielFemale: 'isrƒÅ‚Äôƒ´liyyƒÅt',
    arabicNationalitySingularFemale: 'ŸåÔ∫îŸëŸéÔª¥ŸêÔª†Ôª¥ŸêÔ∫ãÿßŸéÔ∫ÆŸíÔ∫≥ŸêÔ∫á',
    frenchNationalitySingularFemale: 'Isra√©lienne',
    translitNationalitySingularFemale: 'isrƒÅ‚Äôƒ´liyya'
  }
] ;

    // --- Modes d'apprentissage ---
    const modes = [
      { value: "country-fr-to-ar", label: "Pays (fran√ßais ‚Üí arabe)", q: d => d.frenchCountry, a: d => d.arabicCountry, showTranslit: d => d.translitCountry, inputType: "ar-list", answerLang: "ar" },
      { value: "country-ar-to-fr", label: "Pays (arabe ‚Üí fran√ßais)", q: d => d.arabicCountry, a: d => d.frenchCountry, showTranslit: d => d.translitCountry, inputType: "text", answerLang: "fr" },
      { value: "nat-m-sg-fr-to-ar", label: "Nationalit√© masc. sg (fr ‚Üí ar)", q: d => d.frenchNationalitySingularMale, a: d => d.arabicNationalitySingularMale, showTranslit: d => d.translitNationalitySingularMale, inputType: "ar-list", answerLang: "ar" },
      { value: "nat-m-pl-fr-to-ar", label: "Nationalit√© masc. pl (fr ‚Üí ar)", q: d => d.frenchNationalityPlurielMale, a: d => d.arabicNationalityPlurielMale, showTranslit: d => d.translitNationalityPlurielMale, inputType: "ar-list", answerLang: "ar" },
      { value: "nat-f-sg-fr-to-ar", label: "Nationalit√© f√©m. sg (fr ‚Üí ar)", q: d => d.frenchNationalitySingularFemale, a: d => d.arabicNationalitySingularFemale, showTranslit: d => d.translitNationalitySingularFemale, inputType: "ar-list", answerLang: "ar" },
      { value: "nat-f-pl-fr-to-ar", label: "Nationalit√© f√©m. pl (fr ‚Üí ar)", q: d => d.frenchNationalityPlurielFemale, a: d => d.arabicNationalityPlurielFemale, showTranslit: d => d.translitNationalityPlurielFemale, inputType: "ar-list", answerLang: "ar" },
      { value: "nat-m-sg-ar-to-fr", label: "Nationalit√© masc. sg (ar ‚Üí fr)", q: d => d.arabicNationalitySingularMale, a: d => d.frenchNationalitySingularMale, showTranslit: d => d.translitNationalitySingularMale, inputType: "text", answerLang: "fr" },
      { value: "nat-m-pl-ar-to-fr", label: "Nationalit√© masc. pl (ar ‚Üí fr)", q: d => d.arabicNationalityPlurielMale, a: d => d.frenchNationalityPlurielMale, showTranslit: d => d.translitNationalityPlurielMale, inputType: "text", answerLang: "fr" },
      { value: "nat-f-sg-ar-to-fr", label: "Nationalit√© f√©m. sg (ar ‚Üí fr)", q: d => d.arabicNationalitySingularFemale, a: d => d.frenchNationalitySingularFemale, showTranslit: d => d.translitNationalitySingularFemale, inputType: "text", answerLang: "fr" },
      { value: "nat-f-pl-ar-to-fr", label: "Nationalit√© f√©m. pl (ar ‚Üí fr)", q: d => d.arabicNationalityPlurielFemale, a: d => d.frenchNationalityPlurielFemale, showTranslit: d => d.translitNationalityPlurielFemale, inputType: "text", answerLang: "fr" },
      { value: "quizz-mix", label: "Quizz (modes m√©lang√©s)", q: null, a: null, showTranslit: null, inputType: "auto", answerLang: null },
    ];
    let currentMode = modes[0];
    let currentData = null;
    let good = 0, bad = 0;
    let timer = null;
    let timerVal = 120;
    let timeLeft = 120;
    let lastQuestionIndex = -1;
    let allowAnswer = true;
    let deviceIsMobile = window.matchMedia("(pointer:coarse)").matches || window.innerWidth < 700;

let currentLevel = 1; // 1 ou 2
let currentDataList = data; // tableau utilis√© pour les questions


// Pr√©pare la s√©quence de questions al√©atoires
let questionOrder = [];
let questionPointer = 0;


function getCurrentDataList() {
  if (currentLevel === 1) return data;
  // Niveau 2 : concat√®ne data et dataLevel2
  return data.concat(dataLevel2);
}


document.getElementById("level-select").addEventListener("change", function() {
  currentLevel = parseInt(this.value, 10);
  currentDataList = getCurrentDataList();
  resetQuiz();
});

    function shuffleQuestions() {
  /*questionOrder = Array.from({length: data.length}, (_, i) => i);*/
const dataList = getCurrentDataList();
questionOrder = Array.from({length: dataList.length}, (_, i) => i);
  for (let i = questionOrder.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [questionOrder[i], questionOrder[j]] = [questionOrder[j], questionOrder[i]];
  }
  questionPointer = 0;
    }


    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    /*function pickRandomQuestion() {
      let idx;
      do {
        idx = Math.floor(Math.random() * data.length);
      } while (idx === lastQuestionIndex && data.length > 1);
      lastQuestionIndex = idx;
      return data[idx];
    }*/

    function pickRandomQuestion() {
  if (questionOrder.length === 0 || questionPointer >= questionOrder.length) {
    shuffleQuestions();
  }
  const idx = questionOrder[questionPointer];
  questionPointer++;
  return getCurrentDataList()[idx];
    }

    function pickRandomMode() {
      let idx;
      do {
        idx = Math.floor(Math.random() * (modes.length - 1));
      } while (idx === modes.indexOf(currentMode) && modes.length > 2);
      return modes[idx];
    }
    function updateStats() {
      document.getElementById("good-count").textContent = good;
      document.getElementById("bad-count").textContent = bad;
    }
    function updateTimerDisplay() {
      document.getElementById("timer").textContent = `‚è≥ ${timeLeft}s`;
    }
    function startTimer() {
      clearInterval(timer);
      timeLeft = timerVal;
      updateTimerDisplay();
      timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        if (timeLeft <= 0) {
          clearInterval(timer);
          allowAnswer = false;
          showFeedback(false, "‚è∞ Temps √©coul√© !");
          document.getElementById("action-buttons").innerHTML = `<button onclick="nextQuestion()">Nouvel exercice</button>`;
        }
      }, 1000);
    }
    function resetQuiz() {
       good = 0; bad = 0;
  updateStats();
  shuffleQuestions(); // <-- Ajout ici !
  nextQuestion();
    }
    function stripSpecial(str) {
      return str.normalize("NFD").replace(/[\u064B-\u0652]/g, "")
        .replace(/[\u200C-\u206F\u2E00-\u2E7F'‚Äô‚Äò"¬´¬ª.,;:!?()\[\]\-‚Äì‚Äî_]/g, "")
        .replace(/\s+/g, " ")
        .trim()
        .toLowerCase();
    }
    function answerIsCorrect(user, expected) {
      let userWords = stripSpecial(user).split(" ").filter(Boolean);
      let expectedWords = stripSpecial(expected).split(" ").filter(Boolean);
      return expectedWords.every(w => userWords.includes(w)) && userWords.length === expectedWords.length;
    }
    function showFeedback(ok, msg, translit = "") {
      const fb = document.getElementById("feedback");
      fb.className = "feedback " + (ok ? "success" : "error");
      fb.innerHTML = ok ? `‚úÖ ${msg}` : `‚ùå ${msg}`;
      if (ok && translit) fb.innerHTML += `<br><span style="font-size:1.1em;color:#555;">Translitt√©ration : <b>${translit}</b></span>`;
    }
    function nextQuestion() {
      allowAnswer = true;
      document.getElementById("feedback").textContent = "";
      document.getElementById("action-buttons").innerHTML = "";
      if (document.activeElement) document.activeElement.blur();
      if (currentMode.value === "quizz-mix") {
        currentMode = pickRandomMode();
      }
      currentData = pickRandomQuestion();
      const qDiv = document.getElementById("question");
      qDiv.style.opacity = 0;
      setTimeout(() => {
        renderQuestion();
        qDiv.style.opacity = 1;
      }, 200);
      startTimer();
    }
    function renderQuestion() {
      let qDiv = document.getElementById("question");
      let rDiv = document.getElementById("reponses");
      let ab = document.getElementById("action-buttons");
      rDiv.innerHTML = "";
      ab.innerHTML = "";
      let qtxt = currentMode.q(currentData);
      qDiv.textContent = format(qtxt);
      // Cas r√©ponse attendue en arabe (liste)
      if (currentMode.inputType === "ar-list") {
        renderArList();
      } else if (currentMode.inputType === "auto") {
        // Pour le mode quizz mix, choisir au hasard entre input texte ou liste
        let mode = Math.random() < 0.5 ? "ar-list" : "text";
        if (mode === "ar-list") renderArList(); else renderTextInput();
      } else {
        renderTextInput();
      }
    }


    function renderTextInput() {
      let rDiv = document.getElementById("reponses");
      let input = document.createElement("input");
      input.type = "text";
      input.lang = currentMode.answerLang;
      input.dir = currentMode.answerLang === "ar" ? "rtl" : "ltr";
      input.style.fontSize = "1.3em";
      input.style.width = "80%";
      input.autofocus = true;
      input.addEventListener("keydown", function(e) {
        if (e.key === "Enter" && allowAnswer) validateTextAnswer(input.value);
      });
      rDiv.appendChild(input);
      input.focus();
    }



function format(word) {
  // Expression r√©guli√®re pour d√©tecter au moins une lettre arabe
  const arabicRegex = /[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;

  if (arabicRegex.test(word)) {
    // Regroupe chaque lettre arabe avec ses √©ventuels diacritiques qui la suivent
    const graphemes = [...word.matchAll(/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF](?:[\u064B-\u065F\u0610-\u061A\u06D6-\u06ED])*/g)];
    return graphemes.map(m => m[0]).reverse().join('');
  }

  // Sinon, renvoyer tel quel
  return word;
}



function renderArList() {
  let ab = document.getElementById("action-buttons");
  let rDiv = document.getElementById("reponses");

  let all = getCurrentDataList().map(currentMode.a);
  let expected = currentMode.a(currentData);
  let choices = shuffle([...all]);

  // Desktop : tableau √† 4 colonnes
  if (!deviceIsMobile) {
    let table = document.createElement("table");
    table.className = "tableau-reponses";
    let tr = null;

    choices.forEach((c, i) => {
      if (i % 4 === 0) {
        tr = document.createElement("tr");
        table.appendChild(tr);
      }

      let td = document.createElement("td");
      td.className = "checkbox-cell";

      let chk = document.createElement("input");
      chk.type = "checkbox";
      chk.name = "choix";
      chk.id = "choix" + i;
      chk.onclick = () => {
        document.querySelectorAll('input[name="choix"]').forEach(cb => {
          if (cb !== chk) cb.checked = false;
        });
      };

      td.appendChild(chk);
      td.appendChild(document.createElement("br"));

      let lbl = document.createElement("label");
      lbl.htmlFor = "choix" + i;
    //   console.log(c);
      format(c)
    //  console.log(c);
      lbl.textContent = format(c);

      

      //if (/[\u0600-\u06FF]/.test(c)) {
        lbl.setAttribute("dir", "rtl");
        lbl.setAttribute("lang", "ar");
        lbl.style.textAlign = "right";
        lbl.style.fontSize = "2.5em";
     // }

      td.appendChild(lbl);
      tr.appendChild(td);
    });

    rDiv.appendChild(table);
    ab.innerHTML = `<button onclick="validateArListAnswer()">Valider</button>`;

  } else {
    // Mobile : boutons verticaux
    let container = document.createElement("div");
    container.className = "mobile-choices";

    choices.forEach((c, i) => {
      let btn = document.createElement("button");
   //   console.log(c);
      format(c)
   //   console.log(c);
      btn.textContent = format(c);

      // if (/[\u0600-\u06FF]/.test(c)) {
        btn.setAttribute("dir", "rtl");
        btn.setAttribute("lang", "ar");
        btn.style.textAlign = "center";
        btn.style.fontSize = "2.0em";
        btn.style.color="#fff;"
        btn.id = "btn-" + i;
        btn.style.letterSpacing = "0.1em"; // meilleure lisibilit√©
        btn.style.backgroundColor ="var(--pal-white)";
       // btn.classList.add('mobile-choices');

      // }

      btn.onclick = () => validateArListAnswer(i);
      container.appendChild(btn);
    });

    rDiv.appendChild(container);
   // ab.innerHTML = `<button onclick="validateArListAnswer()">Valider</button>`;

  }
}




    function validateTextAnswer(val) {
      if (!allowAnswer) return;
      allowAnswer = false;
      clearInterval(timer);
      let expected = currentMode.a(currentData);
      let ok = answerIsCorrect(val, expected);
      if (ok) {
        good++; updateStats();
        showFeedback(true, "Bonne r√©ponse !", currentMode.showTranslit(currentData));
        setTimeout(nextQuestion, 1500);

      } else {
        bad++; updateStats();
        showFeedback(false, `Mauvaise r√©ponse. R√©ponse attendue : <b>${expected}</b>`, currentMode.showTranslit(currentData));
        document.getElementById("action-buttons").innerHTML = `<button onclick="nextQuestion()">Nouvel exercice</button>`;
      }

      const select = document.getElementById("mode-select");
      currentMode = modes.find(m => m.value === select.value);
    }
    function validateArListAnswer(idx) {
      if (!allowAnswer) return;
      allowAnswer = false;
      clearInterval(timer);
      let expected = format(currentMode.a(currentData));
      let ok = false;
      if (!deviceIsMobile) {
        let chks = Array.from(document.querySelectorAll('input[name="choix"]'));
        let checkedIdx = chks.findIndex(cb => cb.checked);
        ok = checkedIdx !== -1 && chks[checkedIdx].nextSibling.nextSibling.textContent === expected;
      } else {


        //ok = typeof idx === "number" && document.getElementById("action-buttons").children[idx].textContent === format(expected);
          let identifiant = `btn-${idx}`;
          ok = typeof idx === "number" && document.getElementById(identifiant).textContent === expected;
      }
      if (ok) {
        good++; updateStats();
        showFeedback(true, "Bonne r√©ponse !", currentMode.showTranslit(currentData));
        setTimeout(nextQuestion, 1500);
        let identifiant = `btn-${idx}`;
        let btnOK =document.getElementById(identifiant);
         btnOK.style.backgroundColor ="var(--pal-green)";

      } else {
        bad++; updateStats();
        showFeedback(false, `Mauvaise r√©ponse. R√©ponse attendue : <b>${expected}</b>`, currentMode.showTranslit(currentData));
        document.getElementById("action-buttons").innerHTML = `<button onclick="nextQuestion()">Nouvel exercice</button>`;
      }
      const select = document.getElementById("mode-select");
      currentMode = modes.find(m => m.value === select.value);
    }
    // --- Popups p√©dagogiques ---
    function showCountriesPopup() {
      let html = `<table class="responsive-table" style="width:100%;font-size:1.1em;padding:15px;"><thead><tr><th>üá¶üá™ Arabe</th><th>üá´üá∑ Fran√ßais</th></tr></thead><tbody>`;
      getCurrentDataList().forEach(d => {
        html += `<tr><td style="font-family:serif;font-size:1.2em;">${d.arabicCountry}</td><td>${d.frenchCountry}</td></tr>`;
      });
      html += "</tbody></table>";
      document.getElementById("popup-inner").innerHTML = html;
      document.getElementById("popup-overlay").style.display = "block";
    }
    function showNationalitiesPopup() {
      let html = `<table class="responsive-table" style="width:100%;font-size:1em;padding:15px;"><thead><tr>
      <th>Arabe masc. sg</th><th>Fr. masc. sg</th>
      <th>Arabe masc. pl</th><th>Fr. masc. pl</th>
      <th>Arabe f√©m. sg</th><th>Fr. f√©m. sg</th>
      <th>Arabe f√©m. pl</th><th>Fr. f√©m. pl</th>
      </tr></thead><tbody>`;
      getCurrentDataList().forEach(d => {
        html += `<tr>
          <td>${d.arabicNationalitySingularMale}</td>
          <td>${d.frenchNationalitySingularMale}</td>
          <td>${d.arabicNationalityPlurielMale}</td>
          <td>${d.frenchNationalityPlurielMale}</td>
          <td>${d.arabicNationalitySingularFemale}</td>
          <td>${d.frenchNationalitySingularFemale}</td>
          <td>${d.arabicNationalityPlurielFemale}</td>
          <td>${d.frenchNationalityPlurielFemale}</td>
        </tr>`;
      });
      html += "</tbody></table>";
      document.getElementById("popup-inner").innerHTML = html;
      document.getElementById("popup-overlay").style.display = "block";
    }
    function showRulesPopup() {
      document.getElementById("popup-inner").innerHTML = `
        <h2>R√®gle du Alif & Suffixes</h2>
        <ul>
          <li>Le nom du pays commence souvent par <b>Alif + Ôªù</b> (ex : <b>Ô∫èÔ∫ÆÔªêÔª§Ôªüÿß</b> = al-maghrib).</li>
          <li>Pour la nationalit√© masculine singulier, suffixe <b>ŸëŸåÔª±</b> ("-iyy")</li>
          <li>Pour le pluriel masculin, suffixe <b>ŸéÔª•ÔªÆŸëŸèÔª≥</b> ("-iyy≈´n")</li>
          <li>Pour la nationalit√© f√©minine singulier, suffixe <b>ŸåÔ∫îŸëŸéÔª≥</b> ("-iyya")</li>
          <li>Pour le pluriel f√©minin, suffixe <b>ŸåÔ∫ïÔ∫éŸëŸéÔª≥</b> ("-iyyƒÅt")</li>
          <li>Le <b>Ôª±</b> ("ya" long) marque le f√©minin/pluriel.</li>
        </ul>
      `;
      document.getElementById("popup-overlay").style.display = "block";
    }
    function closePopup() {
      document.getElementById("popup-overlay").style.display = "none";
    }
    // --- Mode sombre/clair persistant ---
    function toggleDarkMode() {
      let dark = !(localStorage.getItem("darkMode") === "true");
      document.body.classList.toggle("dark-mode", dark);
      localStorage.setItem("darkMode", dark);
    }
    function initDarkMode() {
      let dark = localStorage.getItem("darkMode") === "true";
      document.body.classList.toggle("dark-mode", dark);
    }
    document.getElementById("mode-select").addEventListener("change", function() {
      let val = this.value;
      currentMode = modes.find(m => m.value === val);
      resetQuiz();
    });
    document.getElementById("timer-input").addEventListener("input", function() {
      timerVal = parseInt(this.value, 10) || 120;
      timeLeft = timerVal;
      updateTimerDisplay();
    });
    window.onload = function() {
      deviceIsMobile = window.matchMedia("(pointer:coarse)").matches || window.innerWidth < 700;
      initDarkMode();
      resetQuiz();
    };
    window.addEventListener("keydown", function(e) {
      if (e.key === "Escape") closePopup();
    });
    window.addEventListener("resize", function() {
      deviceIsMobile = window.matchMedia("(pointer:coarse)").matches || window.innerWidth < 700;
    });
  </script>
</body>
</html>
